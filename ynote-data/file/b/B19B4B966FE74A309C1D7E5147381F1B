<?xml version="1.0" encoding="UTF-8" standalone="no"?><note xmlns="http://note.youdao.com" file-version="0" schema-version="1.0.3"><head/><body><para><coId>6719-1640936042477</coId><text> 在微服务框架中，一个由客户端发起的请求在后端系统中会经过多个不同的的服务节点调用来协同产生最后的请求结果，每一个前段请求都会形成一条复杂的分布式服务调用链路，链路中的任何一环出现高延时或错误都会引起整个请求最后的失败。</text><inline-styles/><styles/></para><para><coId>3110-1640944237988</coId><text/><inline-styles/><styles/></para><para><coId>4380-1640944238090</coId><text/><inline-styles/><styles/></para><para><coId>8337-1640944238219</coId><text>1、下载zipkin</text><inline-styles/><styles/></para><para><coId>7170-1640944246389</coId><text>2、java-jar运行</text><inline-styles/><styles/></para><para><coId>2089-1640944256185</coId><text>3、localhost:9411</text><inline-styles/><styles/></para><para><coId>9280-1640944393182</coId><text>4、服务提供者payment8001</text><inline-styles/><styles/></para><table><coId>7521-1640944407075</coId><resource-list/><content>{"cells":[{"value":"&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;/artifactId&gt;\n&lt;/dependency&gt;","inlineStyles":{"font-size":[{"from":0,"to":12,"value":13},{"from":13,"to":61,"value":13},{"from":62,"to":118,"value":13},{"from":119,"to":132,"value":13}],"color":[{"from":0,"to":12,"value":"#e8bf6a"},{"from":13,"to":26,"value":"#e8bf6a"},{"from":26,"to":51,"value":"#a9b7c6"},{"from":51,"to":61,"value":"#e8bf6a"},{"from":62,"to":78,"value":"#e8bf6a"},{"from":78,"to":105,"value":"#a9b7c6"},{"from":105,"to":118,"value":"#e8bf6a"},{"from":119,"to":132,"value":"#e8bf6a"}],"back-color":[{"from":0,"to":12,"value":"#2b2b2b"},{"from":13,"to":61,"value":"#2b2b2b"},{"from":62,"to":118,"value":"#2b2b2b"},{"from":119,"to":132,"value":"#2b2b2b"}]}}],"heights":[40],"widths":[620]}</content><styles/></table><para><coId>4358-1640944512818</coId><text>//与application同级</text><inline-styles><font-size><from>0</from><to>16</to><value>16</value></font-size></inline-styles><styles/></para><table><coId>4660-1640944512818</coId><resource-list/><content>{"cells":[{"value":"  zipkin:\n    base-url: http://localhost:9411\n  sleuth:\n    sampler:\n      #采样率值介于 0 到 1 之间，1 则表示全部采集\n     probability: 1"}],"heights":[40],"widths":[620]}</content><styles/></table><para><coId>5966-1640944646148</coId><text/><inline-styles/><styles/></para><table><coId>6270-1640944646148</coId><resource-list/><content>{"cells":[{"value":" \n@GetMapping(\"/payment/zipkin\")\npublic String paymentZipkin()\n{\n    return \"hi ,i'am paymentzipkin server fall back，welcome to atguigu，O(∩_∩)O哈哈~\";\n}"}],"heights":[40],"widths":[620]}</content><styles/></table><para><coId>4668-1640944646148</coId><text>5、消费者order80</text><inline-styles><font-size><from>0</from><to>12</to><value>16</value></font-size></inline-styles><styles/></para><table><coId>5451-1640944925152</coId><resource-list/><content>{"cells":[{"value":"&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;/artifactId&gt;\n&lt;/dependency&gt;","inlineStyles":{"font-size":[{"from":0,"to":12,"value":13},{"from":13,"to":61,"value":13},{"from":62,"to":118,"value":13},{"from":119,"to":132,"value":13}],"color":[{"from":0,"to":12,"value":"#e8bf6a"},{"from":13,"to":26,"value":"#e8bf6a"},{"from":26,"to":51,"value":"#a9b7c6"},{"from":51,"to":61,"value":"#e8bf6a"},{"from":62,"to":78,"value":"#e8bf6a"},{"from":78,"to":105,"value":"#a9b7c6"},{"from":105,"to":118,"value":"#e8bf6a"},{"from":119,"to":132,"value":"#e8bf6a"}],"back-color":[{"from":0,"to":12,"value":"#2b2b2b"},{"from":13,"to":61,"value":"#2b2b2b"},{"from":62,"to":118,"value":"#2b2b2b"},{"from":119,"to":132,"value":"#2b2b2b"}]}}],"heights":[40],"widths":[620]}</content><styles/></table><para><coId>9237-1640944925152</coId><text/><inline-styles/><styles/></para><table><coId>8972-1640944918511</coId><resource-list/><content>{"cells":[{"value":"spring:\n    application:\n        name: cloud-order-service\n    zipkin:\n      base-url: http://localhost:9411\n    sleuth:\n      sampler:\n        probability: 1"}],"heights":[40],"widths":[620]}</content><styles/></table><para><coId>1079-1640944933632</coId><text/><inline-styles/><styles/></para><table><coId>5017-1640944933632</coId><resource-list/><content>{"cells":[{"value":" \n// ====================&gt; zipkin+sleuth\n@GetMapping(\"/consumer/payment/zipkin\")\npublic String paymentZipkin()\n{\n    String result = restTemplate.getForObject(\"http://localhost:8001\"+\"/payment/zipkin/\", String.class);\n    return result;\n}"}],"heights":[40],"widths":[620]}</content><styles/></table><para><coId>5080-1640944933632</coId><text>6、消费者将loadbalance负载均衡注释去掉</text><inline-styles><font-family><from>0</from><to>25</to><value>微软雅黑</value></font-family><font-size><from>0</from><to>25</to><value>16</value></font-size></inline-styles><styles/></para><attach><coId>5080-1641016657653</coId><source>https://note.youdao.com/yws/res/16558/D60E891A22E049B7BC71DEF0895B9989</source><resource>https://note.youdao.com/yws/res/16559/DFE96F8AA72B4A64B33F260D2669504A</resource><filename>springcloud.zip</filename><filelength>132324</filelength><styles/></attach><para><coId>6174-1641016657653</coId><text/><inline-styles/><styles/></para></body></note>