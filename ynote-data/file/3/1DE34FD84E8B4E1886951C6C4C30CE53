<?xml version="1.0" encoding="UTF-8" standalone="no"?><note xmlns="http://note.youdao.com" file-version="0" schema-version="1.0.3"><head><list id="4466-1622103351582" type="unordered"/><list id="4531-1622103951511" type="unordered"/><list id="9469-1622103951512" type="unordered"/><list id="8259-1622103951513" type="unordered"/><list id="1244-1622103951517" type="unordered"/><list id="2486-1622103951519" type="unordered"/><list id="9024-1622103951521" type="unordered"/><list id="8217-1622103951521" type="unordered"/></head><body><para><coId>8349-1622103006064</coId><text>1、错误处理</text><inline-styles><bold><from>0</from><to>6</to><value>true</value></bold><font-size><from>0</from><to>6</to><value>24</value></font-size></inline-styles><styles><line-height>1.3333333333333333</line-height></styles></para><para><coId>6048-1622103351595</coId><text>1、默认规则</text><inline-styles><bold><from>0</from><to>6</to><value>true</value></bold><font-size><from>0</from><to>6</to><value>16</value></font-size></inline-styles><styles><line-height>1.5</line-height></styles></para><list-item level="1" list-id="4466-1622103351582"><coId>7497-1622103351595</coId><text>默认情况下，Spring Boot提供/error处理所有错误的映射</text><inline-styles><font-size><from>0</from><to>10</to><value>15</value></font-size><color><from>0</from><to>10</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><list-item level="1" list-id="4466-1622103351582"><coId>2395-1622103351595</coId><text>对于机器客户端，它将生成JSON响应，其中包含错误，HTTP状态和异常消息的详细信息。对于浏览器客户端，响应一个“ whitelabel”错误视图，以HTML格式呈现相同的数据</text><inline-styles><font-size><from>0</from><to>74</to><value>15</value></font-size><font-size><from>74</from><to>88</to><value>16</value></font-size><color><from>0</from><to>74</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><image><coId>3319-1622103351595</coId><source>https://note.youdao.com/yws/res/13661/A42FD3ECA0D3432489D07F1E672C3BFA</source><text/><styles><width>481</width><height>190</height></styles></image><image><coId>6956-1622103351595</coId><source>https://note.youdao.com/yws/res/13662/459076869B7D40578EE88FFFFC0764C2</source><text/><styles><width>620</width><height>161</height></styles></image><list-item level="1" list-id="4466-1622103351582"><coId>3736-1622103351595</coId><text>要对其进行自定义，添加View解析为error</text><inline-styles><font-size><from>0</from><to>23</to><value>15</value></font-size><color><from>0</from><to>23</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><list-item level="1" list-id="4466-1622103351582"><coId>7642-1622103351595</coId><text>要完全替换默认行为，可以实现 ErrorController 并注册该类型的Bean定义，或添加ErrorAttributes类型的组件以使用现有机制但替换其内容。</text><inline-styles><font-size><from>0</from><to>82</to><value>15</value></font-size><color><from>0</from><to>82</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><list-item level="1" list-id="4466-1622103351582"><coId>7810-1622103351595</coId><text>error/下的4xx，5xx页面会被自动解析；</text><inline-styles><font-size><from>0</from><to>24</to><value>15</value></font-size><color><from>0</from><to>24</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><image><coId>9346-1622103351595</coId><source>https://note.youdao.com/yws/res/13660/72C3DF5DB1584DEEAB80347FC422127D</source><text/><styles><width>325</width><height>135</height></styles></image><para><coId>6734-1622103351597</coId><text/><inline-styles/><styles/></para><para><coId>5967-1622103951060</coId><text/><inline-styles/><styles/></para><para><coId>5661-1622103951255</coId><text>2、定制错误处理逻辑</text><inline-styles><bold><from>0</from><to>10</to><value>true</value></bold><font-size><from>0</from><to>10</to><value>16</value></font-size></inline-styles><styles><line-height>1.5</line-height></styles></para><list-item level="1" list-id="4531-1622103951511"><coId>4970-1622103951527</coId><text>自定义错误页</text><inline-styles><font-size><from>0</from><to>6</to><value>15</value></font-size><color><from>0</from><to>6</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><list-item level="2" list-id="9469-1622103951512"><coId>9110-1622103951527</coId><text>error/404.html   error/5xx.html；有精确的错误状态码页面就匹配精确，没有就找 4xx.html；如果都没有就触发白页</text><inline-styles><font-size><from>0</from><to>73</to><value>15</value></font-size><color><from>0</from><to>73</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><list-item level="1" list-id="8259-1622103951513"><coId>4014-1622103951527</coId><text>@ControllerAdvice+@ExceptionHandler处理全局异常；底层是 ExceptionHandlerExceptionResolver 支持的</text><inline-styles><bold><from>46</from><to>83</to><value>true</value></bold><font-size><from>0</from><to>83</to><value>15</value></font-size><color><from>0</from><to>83</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><list-item level="1" list-id="8259-1622103951513"><coId>2120-1622103951527</coId><text>@ResponseStatus+自定义异常 ；底层是 ResponseStatusExceptionResolver ，把responsestatus注解的信息底层调用 response.sendError(statusCode, resolvedReason)；tomcat发送的/error</text><inline-styles><bold><from>27</from><to>147</to><value>true</value></bold><font-size><from>0</from><to>147</to><value>15</value></font-size><color><from>0</from><to>147</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><list-item level="1" list-id="8259-1622103951513"><coId>7678-1622103951527</coId><text>Spring底层的异常，如 参数类型转换异常；DefaultHandlerExceptionResolver 处理框架底层的异常。</text><inline-styles><bold><from>23</from><to>65</to><value>true</value></bold><font-size><from>0</from><to>65</to><value>15</value></font-size><color><from>0</from><to>65</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><list-item level="2" list-id="1244-1622103951517"><coId>8725-1622103951527</coId><text>response.sendError(HttpServletResponse.SC_BAD_REQUEST, ex.getMessage());</text><inline-styles><bold><from>39</from><to>53</to><value>true</value></bold><font-size><from>0</from><to>72</to><value>15</value></font-size><color><from>0</from><to>72</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><image><coId>2799-1622103951527</coId><source>https://note.youdao.com/yws/res/13666/F33E389EFC9849FE836071611C5178CE</source><text/><styles><width>620</width><height>178</height></styles></image><list-item level="1" list-id="2486-1622103951519"><coId>4968-1622103951527</coId><text>自定义实现 HandlerExceptionResolver 处理异常；可以作为默认的全局异常处理规则</text><inline-styles><font-size><from>0</from><to>51</to><value>15</value></font-size><color><from>0</from><to>51</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><image><coId>9173-1622103951527</coId><source>https://note.youdao.com/yws/res/13667/F37E81AFED244FA7958F02185A7A0E38</source><text/><styles><width>552</width><height>153</height></styles></image><list-item level="1" list-id="9024-1622103951521"><coId>7256-1622103951527</coId><text>ErrorViewResolver  实现自定义处理异常；</text><inline-styles><bold><from>0</from><to>17</to><value>true</value></bold><font-size><from>0</from><to>17</to><value>15</value></font-size><font-size><from>17</from><to>19</to><value>13</value></font-size><font-size><from>19</from><to>29</to><value>15</value></font-size><color><from>0</from><to>17</to><value>#404040</value></color><color><from>17</from><to>19</to><value>#222222</value></color><color><from>19</from><to>29</to><value>#404040</value></color><back-color><from>17</from><to>19</to><value>#f8f8f8</value></back-color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><list-item level="2" list-id="8217-1622103951521"><coId>4490-1622103951527</coId><text>response.sendError 。error请求就会转给controller</text><inline-styles><font-size><from>0</from><to>41</to><value>15</value></font-size><color><from>0</from><to>41</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><list-item level="2" list-id="8217-1622103951521"><coId>2230-1622103951527</coId><text>你的异常没有任何人能处理。tomcat底层 response.sendError。error请求就会转给controller</text><inline-styles><font-size><from>0</from><to>62</to><value>15</value></font-size><color><from>0</from><to>62</to><value>#404040</value></color></inline-styles><styles><line-height>1.74</line-height></styles></list-item><list-item level="2" list-id="8217-1622103951521"><coId>4451-1622103951527</coId><text>basicErrorController 要去的页面地址是 ErrorViewResolver  ；</text><inline-styles><bold><from>0</from><to>47</to><value>true</value></bold><font-size><from>0</from><to>47</to><value>15</value></font-size><font-size><from>47</from><to>50</to><value>13</value></font-size><color><from>0</from><to>30</to><value>#f5222d</value></color><color><from>30</from><to>47</to><value>#404040</value></color><color><from>47</from><to>50</to><value>#222222</value></color><back-color><from>47</from><to>50</to><value>#f8f8f8</value></back-color></inline-styles><styles><line-height>1.74</line-height></styles></list-item></body></note>