<?xml version="1.0" encoding="UTF-8" standalone="no"?><note xmlns="http://note.youdao.com" file-version="0" schema-version="1.0.3"><head/><body><heading compat="true" level="a"><coId>3400-1613633525907</coId><text>Mybatis中的缓存</text><inline-styles><bold><from>0</from><to>11</to><value>true</value></bold><font-size><from>0</from><to>11</to><value>32</value></font-size></inline-styles><styles/></heading><para><coId>2071-1613635191357</coId><text>存在于内存中的临时数据,减少和数据库的交互次数，提高执行效率。</text><inline-styles/><styles/></para><para><coId>7257-1613635084065</coId><text>		适用于缓存：</text><inline-styles/><styles/></para><para><coId>2619-1613635084065</coId><text>			经常查询并且不经常改变的。</text><inline-styles/><styles/></para><para><coId>4868-1613635084065</coId><text>			数据的正确与否对最终结果影响不大的。</text><inline-styles/><styles/></para><para><coId>8375-1613635084065</coId><text>		不适用于缓存：</text><inline-styles/><styles/></para><para><coId>7838-1613635084065</coId><text>			经常改变的数据</text><inline-styles/><styles/></para><para><coId>5964-1613635084065</coId><text>			数据的正确与否对最终结果影响很大的。</text><inline-styles/><styles/></para><para><coId>2524-1613635084065</coId><text>			例如：商品的库存，银行的汇率，股市的牌价。</text><inline-styles/><styles/></para><para><coId>1162-1613635084065</coId><text>Mybatis中的一级缓存和二级缓存</text><inline-styles/><styles/></para><para><coId>2817-1613635084065</coId><text>	一级缓存：</text><inline-styles/><styles/></para><para><coId>0026-1613635084065</coId><text>		它指的是Mybatis中SqlSession对象的缓存。</text><inline-styles/><styles/></para><para><coId>6767-1613635084065</coId><text>		当我们执行查询之后，查询的结果会同时存入到SqlSession为我们提供一块区域中。</text><inline-styles/><styles/></para><para><coId>5516-1613635084065</coId><text>		该区域的结构是一个Map。当我们再次查询同样的数据，mybatis会先去sqlsession中</text><inline-styles/><styles/></para><para><coId>3014-1613635084065</coId><text>		查询是否有，有的话直接拿出来用。</text><inline-styles/><styles/></para><para><coId>4646-1613635084065</coId><text>		当SqlSession对象消失时，mybatis的一级缓存也就消失了。</text><inline-styles/><styles/></para><para><coId>6112-1613639706976</coId><text>当调用SQLSession的修改，添加，删除，commmit（），close（）等方法，就会清空1级缓存</text><inline-styles/><styles/></para><image><coId>7714-1613639385954</coId><source>https://note.youdao.com/yws/res/11443/71F88D0A8F6544E29C96A6D8E096B5CC</source><text/><styles><width>546</width><height>30</height></styles></image><para><coId>9192-1613635084065</coId><text>	二级缓存:</text><inline-styles/><styles/></para><para><coId>9498-1613635084065</coId><text>		它指的是Mybatis中SqlSessionFactory对象的缓存。由同一个SqlSessionFactory对象创建的SqlSession共享其缓存。二级缓存存放的是数据，而不是对象</text><inline-styles/><styles/></para><para><coId>9942-1613635084065</coId><text>		二级缓存的使用步骤：</text><inline-styles/><styles/></para><para><coId>8420-1613635084065</coId><text>			第一步：让Mybatis框架支持二级缓存（在SqlMapConfig.xml中配置）</text><inline-styles/><styles/></para><para><coId>9099-1613635084065</coId><text>			第二步：让当前的映射文件支持二级缓存（在IUserDao.xml中配置）</text><inline-styles/><styles/></para><para><coId>1784-1613640211098</coId><text>映射文件mapper中添加&lt;cache/&gt;</text><inline-styles/><styles><text-indent>5</text-indent></styles></para><para><coId>7844-1613635084065</coId><text>			第三步：让当前的操作支持二级缓存（在select标签中配置）</text><inline-styles/><styles/></para><para><coId>6734-1613640244064</coId><text>select 标签中添加：useCache="true"</text><inline-styles/><styles><text-indent>5</text-indent></styles></para><para><coId>2245-1613635084065</coId><text>3、Mybatis中的注解开发</text><inline-styles/><styles/></para><image><coId>3900-1613704751392</coId><source>https://note.youdao.com/yws/res/11461/DEAEEEF3EFB84940B530BFDEEF8EB0C1</source><text/><styles><width>468</width><height>326</height></styles></image><para><coId>3235-1613704749334</coId><text/><inline-styles/><styles/></para><para><coId>8254-1613633525907</coId><text>用注解方式实现resultmap</text><inline-styles><font-size><from>0</from><to>16</to><value>16</value></font-size></inline-styles><styles/></para><image><coId>1990-1613711150324</coId><source>https://note.youdao.com/yws/res/11468/ACCD635251C842578A5312E6CFCBBD30</source><text/><styles><width>620</width><height>171</height></styles></image><image><coId>3269-1613711191741</coId><source>https://note.youdao.com/yws/res/11470/9C41D2D505BE4CD28799F49A496B9834</source><text/><styles><width>620</width><height>109</height></styles></image><para><coId>5900-1613711189153</coId><text>多表查询：</text><inline-styles><font-size><from>0</from><to>5</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>3881-1613711939238</coId><text>一对一（多对一）：</text><inline-styles><font-size><from>0</from><to>9</to><value>16</value></font-size></inline-styles><styles/></para><image><coId>4032-1613711750542</coId><source>https://note.youdao.com/yws/res/11473/B432894EEBA44BDF861471E49C3712EE</source><text/><styles><width>620</width><height>83</height></styles></image><para><coId>5426-1613711189153</coId><text>一对多：</text><inline-styles><font-size><from>0</from><to>4</to><value>16</value></font-size></inline-styles><styles/></para><image><coId>8686-1613711979153</coId><source>https://note.youdao.com/yws/res/11479/ABD8FC950FBA481C8E475A1ABBB8EF33</source><text/><styles><width>620</width><height>185</height></styles></image><para><coId>7964-1613711951578</coId><text/><inline-styles/><styles/></para><para><coId>6823-1613712257572</coId><text/><inline-styles/><styles/></para><para><coId>1038-1613712257725</coId><text/><inline-styles/><styles/></para><para><coId>9757-1613712257858</coId><text>开启二级缓存：</text><inline-styles><font-size><from>0</from><to>7</to><value>16</value></font-size></inline-styles><styles/></para><image><coId>8297-1613712277745</coId><source>https://note.youdao.com/yws/res/11482/0AEFD7BF838145358697BD55840C9528</source><text/><styles><width>519</width><height>94</height></styles></image><para><coId>2612-1613712277745</coId><text/><inline-styles/><styles/></para></body></note>