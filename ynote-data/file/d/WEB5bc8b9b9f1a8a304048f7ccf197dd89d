{"2":"1","3":"Ju9C-1621846617594","4":{"version":1,"incompatibleVersion":0,"fv":"0"},"5":[{"3":"3060-1621846615933","5":[{"2":"2","3":"p5PQ-1621846617594","7":[{"8":"MySQL官方对索引的定义为：","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"索引（","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"Index","9":[{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"）是帮助","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"MySQL","9":[{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"高效获取数据的数据结构","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"Ml9h-1658462468317","4":{"version":1},"5":[{"2":"2","3":"dSCM-1658462468316","7":[{"8":"索引的本质：","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"索引是数据结构。你可以简单理解为“排好序的快速查找数据结构”，满足特定查找算法。这些数据结构以某种方式指向数据， 这样就可以在这些数据结构的基础上实现 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"高级查找算法 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"XAkA-1658462601136","4":{"l":"h3"},"5":[{"2":"2","3":"TPWy-1658462601134","7":[{"8":"优点 ","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"Wyu4-1658462601847","4":{"version":1},"5":[{"2":"2","3":"nkc2-1658462601844","7":[{"8":"（1）类似大学图书馆建书目索引，提高数据检索的效率，降低 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"数据库的","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"IO","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"成本 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，这也是创建索引最主要的原因。 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"OyNq-1658462636497","4":{"version":1},"5":[{"2":"2","3":"dq0t-1658462636495","7":[{"8":"（2）通过创建唯一索引，可以保证数据库表中每一行 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"数据的唯一性 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]}]}]},{"3":"Qe3i-1658462640394","4":{"version":1},"5":[{"2":"2","3":"MLN9-1658462640393","7":[{"8":"（3）在实现数据的参考完整性方面，可以 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"加速表和表之间的连接 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。换句话说，对于有依赖关系的子表和父表联合查询时，可以提高查询速度。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"X2vr-1658462642756","4":{"version":1},"5":[{"2":"2","3":"q6UE-1658462642754","7":[{"8":"（4）在使用分组和排序子句进行数据查询时，可以显著 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"减少查询中分组和排序的时间 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，降低了CPU的消耗。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"XATB-1658462670072","4":{"l":"h3"},"5":[{"2":"2","3":"ZAyR-1658462670071","7":[{"8":"缺点","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"pLsK-1658462865279","4":{"version":1},"5":[{"2":"2","3":"HIyv-1658462865277","7":[{"8":"（1）创建索引和维护索引要 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"耗费时间 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，并且随着数据量的增加，所耗费的时间也会增加。 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"sqQH-1658462870707","4":{"version":1},"5":[{"2":"2","3":"4HrJ-1658462870705","7":[{"8":"（2）索引需要占 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"磁盘空间 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，除了数据表占数据空间之外，每一个索引还要占一定的物理空间， ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"存储在磁盘上 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，如果有大量的索引，索引文件就可能比数据文件更快达到最大文件尺寸。 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"hNzW-1658462873659","4":{"version":1},"5":[{"2":"2","3":"el1R-1658462873656","7":[{"8":"（3）虽然索引大大提高了查询速度，同时却会 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"降低更新表的速度 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。当对表中的数据进行增加、删除和修改的时候，索引也要动态地维护，这样就降低了数据的维护速度。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"3891-1658462876849","4":{"version":1},"5":[{"2":"2","3":"rACA-1658462876847","7":[{"8":"因此，选择使用索引时，需要综合考虑索引的优点和缺点","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"8mDi-1658462603118","4":{"version":1},"5":[{"2":"2","3":"j8Na-1658462603117","7":[{"8":"提示:索引可以提高查询的速度，但是会影响插入记录的速度。这种情况下，最好的办法是先删除表中的索引，然后插入数据，插入完成后再创建索引。","9":[{"2":"inlineCode"}]}]}]},{"3":"THzS-1658463933581","4":{"l":"h1"},"5":[{"2":"2","3":"Uky7-1658463933580","7":[{"8":"InnoDB","9":[{"0":"#34495e","2":"c"}]},{"8":"中索引的推演","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"y0Bq-1658463946659","4":{"wrap":false,"la":"","th":"default"},"5":[{"3":"aKW5-1658463946658","5":[{"2":"2","3":"aEHc-1658462603329","7":[{"8":"SELECT [列名列表] FROM 表名 WHERE 列名 = xxx;"}]}],"6":"cl"}],"6":"cd"},{"3":"OBis-1658462603426","4":{"l":"h6"},"5":[{"2":"2","3":"7HdY-1658462603424","7":[{"8":"1. ","9":[{"0":"#34495e","2":"c"}]},{"8":"在一个页中的查找 ","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"7KrT-1658463953557","4":{"l":"h6"},"5":[{"2":"2","3":"57YG-1658463953556","7":[{"8":"2. ","9":[{"0":"#34495e","2":"c"}]},{"8":"在很多页中查找","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"aHJx-1658462605520","4":{"version":1},"5":[{"2":"2","3":"qMwX-1658462605518","7":[{"8":"在没有索引的情况下，不论是根据主键列或者其他列的值进行查找，由于我们并不能快速的定位到记录所在的页，所以只能 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"从第一个页 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"沿着 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"双向链表 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"一直往下找，在每一个页中根据我们上面的查找方式去查找指定的记录。因为要遍历所有的数据页，所以这种方式显然是 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"超级耗时 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"的。如果一个表有一亿条记录呢？此时 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"索引 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"应运而生。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"c3qK-1658462853320","4":{"l":"h2"},"5":[{"2":"2","3":"xIDG-1658462853318","7":[{"8":"设计索引","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"2seQ-1658464109023","4":{"wrap":false,"la":"","th":"default"},"5":[{"3":"hR8T-1658464109022","5":[{"2":"2","3":"FbTQ-1658462853830","7":[{"8":"mysql> CREATE TABLE index_demo("}]}],"6":"cl"},{"3":"0X1o-1658464109479","5":[{"2":"2","3":"ZVD3-1658464109478","7":[{"8":"-> c1 INT,"}]}],"6":"cl"},{"3":"V8BF-1658464109481","5":[{"2":"2","3":"XeOA-1658464109480","7":[{"8":"-> c2 INT,"}]}],"6":"cl"},{"3":"xHgS-1658464109483","5":[{"2":"2","3":"afkn-1658464109482","7":[{"8":"-> c3 CHAR(1),"}]}],"6":"cl"},{"3":"WFgc-1658464109485","5":[{"2":"2","3":"r10R-1658464109484","7":[{"8":"-> PRIMARY KEY(c1)"}]}],"6":"cl"},{"3":"qCzi-1658464109487","5":[{"2":"2","3":"dnmU-1658464109486","7":[{"8":"-> ) ROW_FORMAT = Compact;"}]}],"6":"cl"}],"6":"cd"},{"3":"BvD9-1658462853937","4":{"version":1},"5":[{"2":"2","3":"89M8-1658462853935","7":[{"8":"这个新建的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"index_demo ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"表中有2个INT类型的列，1个CHAR(1)类型的列，而且我们规定了c1列为主键，这个表使用 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"Compact ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"行格式来实际存储记录的。这里我们简化了index_demo表的行格式示意图：","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"wsff-1658464129380","4":{"version":1,"u":"https://note.youdao.com/yws/res/21331/WEBRESOURCE4c9ac1b771a8d123f9df49e2024eb414","w":572,"h":285},"6":"im"},{"3":"T3sh-1658462854123","4":{"version":1},"5":[{"2":"2","3":"Bue3-1658462854121","7":[{"8":"我们只在示意图里展示记录的这几个部分：","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"ZEyR-1658462854232","4":{"li":"pDF8-1658464155418","lt":"unordered","ll":1},"5":[{"2":"2","3":"mUfJ-1658462854230","7":[{"8":"record_type ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"：记录头信息的一项属性，表示记录的类型， ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"0 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"表示普通记录、 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"2 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"表示最小记录、 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"3 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"表示最大记录、 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"1 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"暂时还没用过，下面讲，（目录页。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"8f3D-1658462854336","4":{"li":"pDF8-1658464155418","lt":"unordered","ll":1},"5":[{"2":"2","3":"zfov-1658462854335","7":[{"8":"next_record ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"：记录头信息的一项属性，表示下一条地址相对于本条记录的地址偏移量，我们用箭头来表明下一条记录是谁。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"J9cR-1658464149143","4":{"li":"pDF8-1658464155418","lt":"unordered","ll":1},"5":[{"2":"2","3":"NjHh-1658464149142","7":[{"8":"各个列的值 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"：这里只记录在 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"index_demo ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"表中的三个列，分别是 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"c1 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"、 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"c2 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"和 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"c3","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"。 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"araq-1658464149145","4":{"li":"pDF8-1658464155418","lt":"unordered","ll":1},"5":[{"2":"2","3":"4nw5-1658464149144","7":[{"8":"其他信息 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"：除了上述3种信息以外的所有信息，包括其他隐藏列的值以及记录的额外信息。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"iJz5-1658462854434","4":{"version":1},"5":[{"2":"2","3":"kD5K-1658462854433","7":[{"8":"把一些记录放到页里的示意图就是：","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"JTCU-1658464314424","4":{"version":1,"u":"https://note.youdao.com/yws/res/21337/WEBRESOURCE7a775dd1bec6a7eb2fcc3bb757134983","w":572,"h":333},"6":"im"},{"3":"K38G-1658462854634","4":{"l":"h3"},"5":[{"2":"2","3":"KBbc-1658462854632","7":[{"8":" ","9":[{"0":"#34495e","2":"c"}]},{"8":"一个简单的索引设计方案","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"IKNe-1658462854730","4":{"version":1},"5":[{"2":"2","3":"W2Uu-1658462854728","7":[{"8":"1、下一个数据页中用户记录的主键值必须大于上一个页中用户记录的主键值。","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"4bRa-1658464681159","4":{"wrap":false,"la":"","th":"default"},"5":[{"3":"azbP-1658464681157","5":[{"2":"2","3":"D45o-1658464580021","7":[{"8":"INSERT INTO index_demo VALUES","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"(4,4,'a')"}]}],"6":"cl"}],"6":"cd"},{"3":"jLWe-1658464721658","4":{"version":1,"u":"https://note.youdao.com/yws/res/21346/WEBRESOURCE22dd87d4376a833f5283dca1d287c21e","w":572,"h":216},"6":"im"},{"3":"kmiO-1658464677052","5":[{"2":"2","3":"Qih8-1658464677050","7":[{"8":"注意，新分配的数据页编号可能并不是连续的。它们只是通过维护着上一个页和下一个页的编号而建立了链表关系。另外，页10中用户记录最大的主键值是5，而页28中有一条记录的主键值是4，因为5 >4，所以这就不符合下一个数据页中用户记录的主键值必须大于上一个页中用户记录的主键值的要求，所以在插入主键值为4的记录的时候需要伴随着一次"},{"8":"记录移动","9":[{"0":"#F33232","2":"c"}]},{"8":"，也就是把主键值为5的记录移动到页28中，然后再把主键值为4的记录插入到页10中，这个过程的示意图如下:"}]}]},{"3":"nmP6-1658464859520","4":{"version":1,"u":"https://note.youdao.com/yws/res/21350/WEBRESOURCE2b88369bf0a86f6ed07f50c98ebb0f5c","w":572,"h":282},"6":"im"},{"3":"GvQb-1658464724020","5":[{"2":"2","3":"BXHl-1658464724018","7":[{"8":"这个过程表明了在对页中的记录进行增删改操作的过程中，我们必须通过一些诸如记录移动的操作来始终保证这个状态一直成立:下一个数据页中用户记录的主键值必须大于上一个页中用户记录的主键值这个过程我们称为"},{"8":"页分裂","9":[{"0":"#F33232","2":"c"}]},{"8":"。"}]}]},{"3":"K4vk-1658462855177","4":{"version":1},"5":[{"2":"2","3":"usGe-1658462855175","7":[{"8":"2、给所有的页建立一个目录项。","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"Phhf-1658462855684","4":{"version":1},"5":[{"2":"2","3":"O4lY-1658462855682","7":[{"8":"由于数据页的编号可能是不连续的，所以在向index_demo表中插入许多条记录后，可能是这样的效果:"}]}]},{"3":"2HuF-1658465023573","4":{"version":1,"u":"https://note.youdao.com/yws/res/21355/WEBRESOURCE0bb061b28909e9cc12aa2b90b5a1de92","w":572,"h":102},"6":"im"},{"3":"mZ7P-1658462855890","4":{"version":1},"5":[{"2":"2","3":"oA1s-1658462855888","7":[{"8":"因为这些16KB的页在物理存储上是不连续的，所以如果想从这么多页中根据主键值快速定位某些记录所在的页，我们需要给它们做个目录，每个页对应一个目录项，每个目录项包括下边两个部分:"}]}]},{"3":"Rfg1-1658465095085","4":{"li":"P6o8-1658465099597","lt":"unordered","ll":1,"s":{"in":28}},"5":[{"2":"2","3":"7Lfd-1658465095084","7":[{"8":"页的用户记录中最小的主键值，我们用key来表示。"}]}],"6":"l"},{"3":"e2j3-1658465095087","4":{"li":"P6o8-1658465099597","lt":"unordered","ll":1,"s":{"in":28}},"5":[{"2":"2","3":"IzDd-1658465095086","7":[{"8":"页号，我们用page_no表示。"}]}],"6":"l"},{"3":"wDZC-1658465470603","4":{"version":1,"u":"https://note.youdao.com/yws/res/21359/WEBRESOURCE1d7f21403c5de76887a2a5183e0de0cb","w":572,"h":251},"6":"im"},{"3":"oJ4x-1658465025659","4":{"version":1,"s":{"in":28}},"5":[{"2":"2","3":"Zogg-1658465025657","7":[{"8":"以 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"页","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"28 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"为例，它对应 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"目录项","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"2 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"，这个目录项中包含着该页的页号 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"28 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"以及该页中用户记录的最小主键值 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"5 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"。我们只需要把几个目录项在物理存储器上连续存储（比如：数组），就可以实现根据主键值快速查找某条记录的功能了。比如：查找主键值为 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"20 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"的记录，具体查找过程分两步：","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"jFsb-1658465593752","4":{"version":1,"s":{"in":28}},"5":[{"2":"2","3":"qYix-1658465593751","7":[{"8":"1. 先从目录项中根据 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"二分法 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"快速确定出主键值为 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"20 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"的记录在 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"目录项","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"3 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"中（因为 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"12 < 20 < 209 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"），它对应的页是 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"页","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"9 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"。 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"VkQf-1658465593756","4":{"version":1,"s":{"in":28}},"5":[{"2":"2","3":"XHLx-1658465593755","7":[{"8":"2. 再根据前边说的在页中查找记录的方式去 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"页","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"9 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"中定位具体的记录","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"EfSQ-1658465026170","4":{"version":1},"5":[{"2":"2","3":"9Lmr-1658465026168","7":[{"8":"至此，针对数据页做的简易目录就搞定了。这个目录有一个别名，称为索引。"}]}]},{"3":"8Jki-1658465026262","4":{"l":"h3"},"5":[{"2":"2","3":"LEkc-1658465026261","7":[{"8":"InnoDB","9":[{"0":"#34495e","2":"c"}]},{"8":"中的索引方案 ","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"M0Bd-1658465026375","4":{"l":"h4"},"5":[{"2":"2","3":"YNWP-1658465026373","7":[{"8":"① 迭代","9":[{"2":"b"},{"0":"#34495e","2":"c"}]},{"8":"1","9":[{"0":"#34495e","2":"c"}]},{"8":"次：目录项纪录的页","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"ApKa-1658465026468","4":{"version":1},"5":[{"2":"2","3":"eQjW-1658465026467","7":[{"8":"我们把前边使用到的目录项放到数据页中的样子就是这样：","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"FJNm-1658468822677","4":{"version":1,"u":"https://note.youdao.com/yws/res/21370/WEBRESOURCEf5646ce6aaed59679ef670b696958897","w":572,"h":282},"6":"im"},{"3":"lSt8-1658465026677","4":{"version":1},"5":[{"2":"2","3":"6qCY-1658465026676","7":[{"8":"从图中可以看出来，我们新分配了一个编号为30的页来专门存储目录项记录。这里再次强调 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"目录项记录","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"和普通的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"用户记录 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"的","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"不同点","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"： ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"ndPv-1658468976249","4":{"li":"hdrJ-1658468988360","lt":"unordered","ll":1},"5":[{"2":"2","3":"6ozc-1658468976248","7":[{"8":"目录项记录 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"record_type ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"值是1，而 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"普通用户记录 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"record_type ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"值是0。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"kRav-1658468976251","4":{"li":"hdrJ-1658468988360","lt":"unordered","ll":1},"5":[{"2":"2","3":"UDRd-1658468976250","7":[{"8":"目录项记录只有 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"主键值和页的编号 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"两个列，而普通的用户记录的列是用户自己定义的，可能包含 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"很多列 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，另外还有InnoDB自己添加的隐藏列。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"S1XT-1658468976256","4":{"li":"hdrJ-1658468988360","lt":"unordered","ll":1},"5":[{"2":"2","3":"VLnQ-1658468976255","7":[{"8":"了解：记录头信息里还有一个叫 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"min_rec_mask ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"的属性，只有在存储 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"目录项记录 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"的页中的主键值最小的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"目录项记录 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"min_rec_mask ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"值为 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"1 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"，其他别的记录的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"min_rec_mask ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"值都是 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"0 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"Xz26-1658468976261","4":{"version":1},"5":[{"2":"2","3":"wZLX-1658468976260","7":[{"8":"相同点：","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"两者用的是一样的数据页，都会为主键值生成 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"Page Directory ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"（页目录），从而在按照主键值进行查找时可以使用 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"二分法 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"来加快查询速度。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"pfZR-1658468976266","4":{"version":1},"5":[{"2":"2","3":"8rXH-1658468976265","7":[{"8":"现在以查找主键为 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"20 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"的记录为例，根据某个主键值去查找记录的步骤就可以大致拆分成下边两步：","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"5kR4-1658468976269","4":{"li":"UEqI-1658469004239","lt":"ordered","ll":1},"5":[{"2":"2","3":"dogj-1658468976268","7":[{"8":"先到存储 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"目录项记录 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"的页，也就是页30中通过 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"二分法 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"快速定位到对应目录项，因为 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"12 < 20 < 209 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"，所以定位到对应的记录所在的页就是页9。 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"JAm8-1658468976275","4":{"li":"UEqI-1658469004239","lt":"ordered","ll":1},"5":[{"2":"2","3":"POeG-1658468976274","7":[{"8":"再到存储用户记录的页9中根据 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"二分法 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"快速定位到主键值为 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"20 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"的用户记录。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"mAUp-1658465026772","4":{"l":"h4"},"5":[{"2":"2","3":"2FBH-1658465026770","7":[{"8":"② 迭代","9":[{"2":"b"},{"0":"#34495e","2":"c"}]},{"8":"2","9":[{"0":"#34495e","2":"c"}]},{"8":"次：多个目录项纪录的页","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"Y9Wh-1658469274748","4":{"version":1,"u":"https://note.youdao.com/yws/res/21377/WEBRESOURCEe5a44890c1a37d0f8405e4b484e77598","w":572,"h":261},"6":"im"},{"3":"r7PU-1658465027074","4":{"version":1},"5":[{"2":"2","3":"vLIg-1658465027072","7":[{"8":"从图中可以看出，我们插入了一条主键值为320的用户记录之后需要两个新的数据页：","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"mirH-1658469281407","4":{"li":"Cyz5-1658469331975","lt":"unordered","ll":1},"5":[{"2":"2","3":"ziMh-1658469281406","7":[{"8":"为存储该用户记录而新生成了 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"页","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"31 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"Pnhm-1658469281409","4":{"li":"Cyz5-1658469331975","lt":"unordered","ll":1},"5":[{"2":"2","3":"nK3Q-1658469281408","7":[{"8":"因为原先存储目录项记录的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"页","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"30","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"的容量已满 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"（我们前边假设只能存储4条目录项记录），所以不得不需要一个新的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"页","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"32 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"来存放 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"页","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"31 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"对应的目录项。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"TFMh-1658465027183","4":{"l":"h4"},"5":[{"2":"2","3":"KzFO-1658465027181","7":[{"8":"③ 迭代","9":[{"2":"b"},{"0":"#34495e","2":"c"}]},{"8":"3","9":[{"0":"#34495e","2":"c"}]},{"8":"次：目录项记录页的目录页","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"IJfQ-1658469514281","4":{"version":1,"u":"https://note.youdao.com/yws/res/21382/WEBRESOURCEfcadf236e032ba79196d3510fccf2f47","w":572,"h":350},"6":"im"},{"3":"xqxv-1658465027372","4":{"version":1},"5":[{"2":"2","3":"sNaD-1658465027371","7":[{"8":"如图，我们生成了一个存储更高级目录项的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"页","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"33 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"，这个页中的两条记录分别代表页30和页32，如果用户记录的主键值在 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"[1, 320) ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"之间，则到页30中查找更详细的目录项记录，如果主键值 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"不小于","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"320 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"的话，就到页32中查找更详细的目录项记录。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"L01E-1658469545805","4":{"version":1,"u":"https://note.youdao.com/yws/res/21385/WEBRESOURCE75a5eb0576779f411e6b25c56919ebb8","w":572,"h":305},"6":"im"},{"3":"tYMn-1658465027546","4":{"version":1},"5":[{"2":"2","3":"V7Uf-1658465027545","7":[{"8":"这个数据结构，它的名称是 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"B+","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"树 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"pJr2-1658465027655","4":{"l":"h4"},"5":[{"2":"2","3":"UKcK-1658465027654","7":[{"8":"④ ","9":[{"2":"b"},{"0":"#34495e","2":"c"}]},{"8":"B+Tree","9":[{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"iI8e-1658465027752","4":{"version":1},"5":[{"2":"2","3":"zEnm-1658465027751","7":[{"8":"所以一般情况下，我们 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"用到的","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"B+","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"树都不会超过","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"4","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"层 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，那我们通过主键值去查找某条记录最多只需要做4个页面内的查找（查找3个目录项页和一个用户记录页），又因为在每个页面内有所谓的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"Page Directory ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"（页目录），所以在页面内也可以通过 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"二分法 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"实现快速定位记录。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"CTlv-1658469804375","4":{"l":"h2"},"5":[{"2":"2","3":"rdlX-1658469804374","7":[{"8":"常见索引概念","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"JVxP-1658465027957","4":{"version":1},"5":[{"2":"2","3":"vYpo-1658465027956","7":[{"8":"索引按照物理实现方式，索引可以分为 2 种：聚簇（聚集）和非聚簇（非聚集）索引。我们也把非聚集索引称为二级索引或者辅助索引。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"QzQQ-1658465028055","4":{"l":"h3"},"5":[{"2":"2","3":"4lJH-1658465028053","7":[{"8":"1. ","9":[{"0":"#34495e","2":"c"}]},{"8":"聚簇索引","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"FvWl-1658469808026","4":{"version":1},"5":[{"2":"2","3":"vvPj-1658469808023","7":[{"8":"聚簇索引","9":[{"0":"#F33232","2":"c"}]},{"8":"并不是一种单独的索引类型，而是"},{"8":"一种数据存储方式","9":[{"0":"#F33232","2":"c"}]},{"8":"(所有的用户记录都存储在了叶子节点)，也就是所谓的索引即数据，数据即索引。"}]}]},{"3":"iFei-1658469808547","4":{"version":1},"5":[{"2":"2","3":"Irwl-1658469808544","7":[{"8":"术语\"聚簇\"表示数据行和相邻的键值聚簇的存储在一起。","9":[{"2":"inlineCode"}]}]}]},{"3":"7DrH-1658469808678","4":{"version":1},"5":[{"2":"2","3":"dNzq-1658469808676","7":[{"8":"特点：","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"DcTk-1658470439942","4":{"version":1},"5":[{"2":"2","3":"KQe1-1658470439941","7":[{"8":"1. 使用记录主键值的大小进行记录和页的排序，这包括三个方面的含义：","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"t9Tl-1658470450034","4":{"li":"Gz9Z-1658470453744","lt":"unordered","ll":1},"5":[{"2":"2","3":"DkzU-1658470450033","7":[{"8":"页内","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"的记录是按照主键的大小顺序排成一个 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"单向链表 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"wFZu-1658470439947","4":{"li":"Gz9Z-1658470453744","lt":"unordered","ll":1},"5":[{"2":"2","3":"TDwb-1658470439946","7":[{"8":"各个存放 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"用户记录的页 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"也是根据页中用户记录的主键大小顺序排成一个 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"双向链表 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"XY4J-1658470439950","4":{"li":"Gz9Z-1658470453744","lt":"unordered","ll":1},"5":[{"2":"2","3":"t4FV-1658470439949","7":[{"8":"存放 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"目录项记录的页 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"分为不同的层次，在同一层次中的页也是根据页中目录项记录的主键大小顺序排成一个 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"双向链表 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"hMYm-1658470439955","4":{"version":1},"5":[{"2":"2","3":"E5U6-1658470439954","7":[{"8":"2. B+树的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"叶子节点 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"存储的是完整的用户记录。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"mQli-1658470439957","4":{"version":1,"s":{"ti":28}},"5":[{"2":"2","3":"bWhd-1658470439956","7":[{"8":"所谓完整的用户记录，就是指这个记录中存储了所有列的值（包括隐藏列）。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"UEWZ-1658469808791","4":{"version":1},"5":[{"2":"2","3":"a2qu-1658469808788","7":[{"8":"我们把具有这两种特性的B+树称为聚簇索引，所有完整的用户记录都存放在这个聚簇索引的叶子节点处。这种聚簇索引并不需要我们在MysQL语句中显式的使用INDEX语句去创建，InnoDB存储引擎会自动的为我们创建聚簇索引。"}]}]},{"3":"K6az-1658469808897","4":{"version":1},"5":[{"2":"2","3":"9lNU-1658469808895","7":[{"8":"优点：","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"4dcy-1658471146904","4":{"li":"E00f-1658471157826","lt":"unordered","ll":1},"5":[{"2":"2","3":"Jqin-1658471146903","7":[{"8":"数据访问更快 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，因为聚簇索引将索引和数据保存在同一个B+树中，因此从聚簇索引中获取数据比非聚簇索引更快","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"5kgv-1658471146908","4":{"li":"E00f-1658471157826","lt":"unordered","ll":1},"5":[{"2":"2","3":"lgB5-1658471146907","7":[{"8":"聚簇索引对于主键的 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"排序查找 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"和 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"范围查找 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"速度非常快","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"2ps8-1658471146911","4":{"li":"E00f-1658471157826","lt":"unordered","ll":1},"5":[{"2":"2","3":"GuZN-1658471146910","7":[{"8":"按照聚簇索引排列顺序，查询显示一定范围数据的时候，由于数据都是紧密相连，数据库不用从多个数据块中提取数据，所以 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"节省了大量的","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"io","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"操作 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"2Qvk-1658469809003","4":{"version":1},"5":[{"2":"2","3":"R2Hz-1658469809001","7":[{"8":"缺点：","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"kh1x-1658471166432","4":{"li":"rmxW-1658471178356","lt":"unordered","ll":1},"5":[{"2":"2","3":"wh5y-1658471166431","7":[{"8":"插入速度严重依赖于插入顺序 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，按照主键的顺序插入是最快的方式，否则将会出现页分裂，严重影响性能。因此，对于InnoDB表，我们一般都会定义一个","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"自增的","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"ID","9":[{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"列为主键","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"zkBM-1658471166437","4":{"li":"rmxW-1658471178356","lt":"unordered","ll":1},"5":[{"2":"2","3":"NAfK-1658471166436","7":[{"8":"更新主键的代价很高 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，因为将会导致被更新的行移动。因此，对于InnoDB表，我们一般定义","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"主键为不可更新","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"yEbV-1658471166441","4":{"li":"rmxW-1658471178356","lt":"unordered","ll":1},"5":[{"2":"2","3":"quan-1658471166440","7":[{"8":"二级索引访问需要两次索引查找 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，第一次找到主键值，第二次根据主键值找到行数据","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"dSky-1658469809311","4":{"version":1},"5":[{"2":"2","3":"0vVc-1658469809310","7":[{"8":"限制：","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"npMu-1658471352807","4":{"li":"fqUu-1658471430548","lt":"unordered","ll":1},"5":[{"2":"2","3":"YjHv-1658471352803","7":[{"8":"对于MysQL数据库目前只有InnoD巳数据引擎支持聚簇索引，而MylSAM并不支持聚簇索引。"}]}],"6":"l"},{"3":"KgHs-1658469809407","4":{"li":"fqUu-1658471430548","lt":"unordered","ll":1},"5":[{"2":"2","3":"Dd1C-1658469809406","7":[{"8":"由于数据物理存储排序方式只能有一种，所以每个MysQL的"},{"8":"表只能有一个聚簇索引","9":[{"0":"#FFB700","2":"c"}]},{"8":"。一般情况下就是该表的主键。"}]}],"6":"l"},{"3":"7u2U-1658469809502","4":{"li":"fqUu-1658471430548","lt":"unordered","ll":1},"5":[{"2":"2","3":"VfrV-1658469809500","7":[{"8":"如果没有定义主键，Innodb会选择"},{"8":"非空的唯一索引","9":[{"0":"#FFB700","2":"c"}]},{"8":"代替。如果没有这样的索引,Innodb会隐式的定义一个主键来作为聚簇索引。"}]}],"6":"l"},{"3":"VLpO-1658469809612","4":{"li":"fqUu-1658471430548","lt":"unordered","ll":1},"5":[{"2":"2","3":"zYvu-1658469809611","7":[{"8":"为了充分利用聚簇索引的聚簇的特性，所以innodb表的主键列尽量选用有序的顺序id，而不建议用无序的id，比如UUID、MD5、HASH、字符串列作为主键无法保证数据的顺序增长。"}]}],"6":"l"},{"3":"RZQ4-1658469809708","4":{"l":"h3"},"5":[{"2":"2","3":"j1ED-1658469809706","7":[{"8":"2. ","9":[{"0":"#34495e","2":"c"}]},{"8":"二级索引（辅助索引、非聚簇索引）","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"WgWw-1658471861224","4":{"version":1,"u":"https://note.youdao.com/yws/res/21416/WEBRESOURCE0375e717ed90d8487de8fe3e10c80850","w":572,"h":332},"6":"im"},{"3":"E9Zm-1658471354009","4":{"version":1},"5":[{"2":"2","3":"H9dk-1658471354007","7":[{"8":"这个B+树与上边介绍的聚簇索引有几处不同:"}]}]},{"3":"6H6V-1658471354509","4":{"li":"Fz2g-1658472050201","lt":"unordered","ll":1},"5":[{"2":"2","3":"oZny-1658471354506","7":[{"8":"使用记录c2列的大小进行记录和页的排序，这包括三个方面的含义:"}]}],"6":"l"},{"3":"Iobk-1658472039451","4":{"li":"Fz2g-1658472050201","lt":"unordered","ll":2},"5":[{"2":"2","3":"Vk8G-1658472039449","7":[{"8":"页内的记录是按照c2列的大小顺序排成一个单向链表。"}]}],"6":"l"},{"3":"R78o-1658471354761","4":{"li":"Fz2g-1658472050201","lt":"unordered","ll":2},"5":[{"2":"2","3":"zVUr-1658471354758","7":[{"8":"各个存放用户记录的页也是根据页中记录的c2列大小顺序排成一个双向链表。"}]}],"6":"l"},{"3":"Ud76-1658471354878","4":{"li":"Fz2g-1658472050201","lt":"unordered","ll":2},"5":[{"2":"2","3":"KpSV-1658471354876","7":[{"8":"存放目录项记录的页分为不同的层次，在同一层次中的页也是根据页中目录项记录的c2列大小顺序排成一个双向链表。"}]}],"6":"l"},{"3":"kPPC-1658471355031","4":{"li":"Fz2g-1658472050201","lt":"unordered","ll":1},"5":[{"2":"2","3":"o1BK-1658471355028","7":[{"8":"B+树的叶子节点存储的并不是完整的用户记录，而只是c2列+主键这两个列的值"}]}],"6":"l"},{"3":"Mqhi-1658472025909","4":{"li":"Fz2g-1658472050201","lt":"unordered","ll":1},"5":[{"2":"2","3":"vQPp-1658472025908","7":[{"8":"目录项记录中不再是主键+页号的搭配，而变成了c2列+页号的搭配。"}]}],"6":"l"},{"3":"isyl-1658472117297","4":{"version":1,"u":"https://note.youdao.com/yws/res/21425/WEBRESOURCE225a8a2efdd9411195f67308e1f5285b","w":572,"h":251},"6":"im"},{"3":"VvYu-1658471355281","4":{"version":1},"5":[{"2":"2","3":"KLH8-1658471355279","7":[{"8":"概念：回表 ","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"我们根据这个以c2列大小排序的B+树只能确定我们要查找记录的主键值，所以如果我们想根据c2列的值查找到完整的用户记录的话，仍然需要到 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"聚簇索引 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"中再查一遍，这个过程称为 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"回表 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。也就是根据c2列的值查询一条完整的用户记录需要使用到 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"2 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"棵B+树！","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"45ow-1658471355373","4":{"version":1},"5":[{"2":"2","3":"sb2S-1658471355372","7":[{"8":"小结","9":[{"0":"#CC0000","2":"c"},{"2":"b"}]},{"8":":聚簇索引与非聚簇索引的原理不同，在使用上也有一些区别:"}]}]},{"3":"a1x8-1658471355469","4":{"version":1},"5":[{"2":"2","3":"3Aef-1658471355467","7":[{"8":"1．聚簇索引的叶子节点存储的就是我们的数据记录，非聚簇索引的叶子节点存储的是数据位置，非聚簇索引不会影响数据表的物理存储顺序。"}]}]},{"3":"XKQ0-1658471355580","4":{"version":1},"5":[{"2":"2","3":"O2M3-1658471355578","7":[{"8":"2．一个表只能有一个聚簇索引，因为只能有一种排序存储的方式，但可以有多个非聚簇索引，也就是多个索引目录提供数据检索。"}]}]},{"3":"V8Q1-1658471355676","4":{"version":1},"5":[{"2":"2","3":"fyWy-1658471355674","7":[{"8":"3．使用聚簇索引的时候，数据的查询效率高，但如果对数据进行插入，删除，更新等操作，效率会比非聚簇索引低。"}]}]},{"3":"2CsA-1658471355770","4":{"l":"h3"},"5":[{"2":"2","3":"hy8j-1658471355768","7":[{"8":"3. ","9":[{"0":"#34495e","2":"c"}]},{"8":"联合索引","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"lN3M-1658471355860","4":{"version":1},"5":[{"2":"2","3":"PAvR-1658471355858","7":[{"8":"我们也可以同时以多个列的大小作为排序规则，也就是同时为多个列建立索引，比方说我们想让B+树按照 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"c2","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"和","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"c3","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"列 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"的大小进行排序，这个包含两层含义：","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"2Qbi-1658472488228","4":{"li":"QTTu-1658472491072","lt":"unordered","ll":1},"5":[{"2":"2","3":"HZNJ-1658472488227","7":[{"8":"先把各个记录和页按照c2列进行排序。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"mHBc-1658472488231","4":{"li":"QTTu-1658472491072","lt":"unordered","ll":1},"5":[{"2":"2","3":"XN4R-1658472488230","7":[{"8":"在记录的c2列相同的情况下，采用c3列进行排序","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"uTJq-1658472577486","4":{"version":1,"u":"https://note.youdao.com/yws/res/21438/WEBRESOURCEc8a6d487b0708a31dc49a170a745b426","w":572,"h":327},"6":"im"},{"3":"RE3F-1658471356074","4":{"version":1},"5":[{"2":"2","3":"djOK-1658471356073","7":[{"8":"注意一点，以c2和c3列的大小为排序规则建立的B+树称为 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"联合索引 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，本质上也是一个二级索引。它的意思与分别为c2和c3列分别建立索引的表述是不同的，不同点如下：","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"6mNQ-1658472607605","4":{"li":"JbFR-1658472612199","lt":"unordered","ll":1},"5":[{"2":"2","3":"VDCr-1658472607604","7":[{"8":"建立 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"联合索引 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"只会建立如上图一样的1棵B+树。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"T1OE-1658472607608","4":{"li":"JbFR-1658472612199","lt":"unordered","ll":1},"5":[{"2":"2","3":"bFK5-1658472607607","7":[{"8":"为c2和c3列分别建立索引会分别以c2和c3列的大小为排序规则建立2棵B+树。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}],"6":"l"},{"3":"tLj6-1658471356278","4":{"l":"h2"},"5":[{"2":"2","3":"EHHC-1658471356276","7":[{"8":"InnoDB","9":[{"0":"#34495e","2":"c"}]},{"8":"的","9":[{"2":"b"},{"0":"#34495e","2":"c"}]},{"8":"B+","9":[{"0":"#34495e","2":"c"}]},{"8":"树索引的注意事项 ","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"iyyj-1658471356384","4":{"l":"h3"},"5":[{"2":"2","3":"ArFc-1658471356381","7":[{"8":"根页面位置万年不动 ","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"Xjkw-1658473064740","4":{"version":1,"u":"https://note.youdao.com/yws/res/21443/WEBRESOURCE9a505c3d00ddf36da6322e52e67644e8","w":572,"h":272},"6":"im"},{"3":"L3hx-1658471356621","4":{"l":"h3"},"5":[{"2":"2","3":"NMyS-1658471356618","7":[{"8":"内节点中目录项记录的唯一性 ","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"QvFQ-1658473338416","4":{"version":1,"u":"https://note.youdao.com/yws/res/21446/WEBRESOURCE93b61f1957f5b8c18dea740aac000d3d","w":572,"h":217},"6":"im"},{"3":"XSTr-1658473344943","4":{"version":1,"u":"https://note.youdao.com/yws/res/21448/WEBRESOURCEe78071d668e67bf9c5709c7dc30476e0","w":300,"h":273},"6":"im"},{"3":"H1qw-1658473366423","4":{"version":1,"u":"https://note.youdao.com/yws/res/21450/WEBRESOURCEe3282190cb8eea979955cefe6f33514d","w":572,"h":74},"6":"im"},{"3":"xpP5-1658473439532","4":{"l":"h3"},"5":[{"2":"2","3":"yWSP-1658473439530","7":[{"8":"一个页面最少存储","9":[{"2":"b"},{"0":"#34495e","2":"c"}]},{"8":"2","9":[{"0":"#34495e","2":"c"}]},{"8":"条记录 ","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"b71F-1658471357213","4":{"version":1},"5":[{"2":"2","3":"7FkV-1658471357211","7":[{"8":"一个B+树只需要很少的层级就可以轻松存储数亿条记录，查询速度相当不错!这是因为B+树本质上就是一个大的多层级目录，每经过一个目录时都会过滤掉许多无效的子目录，直到最后访问到存储真实数据的目录。那如果一个大的目录中只存放一个子目录是个啥效果呢?那就是目录层级非常非常非常多，而且最后的那个存放真实数据的目录中只能存放一条记录。费了半天劲只能存放一条真实的用户记录?所以InnoDB的一个数据页至少可以存放两条记录。"}]}]},{"3":"mtsO-1658471357324","4":{"l":"h1"},"5":[{"2":"2","3":"ofQ4-1658471357323","7":[{"8":"MyISAM","9":[{"0":"#34495e","2":"c"}]},{"8":"中的索引方案","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"0zs5-1658462856096","4":{"version":1},"5":[{"2":"2","3":"CuUJ-1658462856095","7":[{"8":"B","9":[{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"树索引适用存储引擎如表所示：","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"5bpl-1658473571613","4":{"version":1,"u":"https://note.youdao.com/yws/res/21457/WEBRESOURCEd1ca9ddef5ddfa49ab5b6dfbbc82e6b7","w":572,"h":70},"6":"im"},{"3":"qxud-1658473494857","4":{"version":1},"5":[{"2":"2","3":"YYnc-1658473494854","7":[{"8":"即使多个存储引擎支持同一种类型的索引，但是他们的实现原理也是不同的。Innodb和MyISAM默认的索引是Btree索引；而Memory默认的索引是Hash索引。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"sPHv-1658473583507","4":{"version":1},"5":[{"2":"2","3":"WZ8g-1658473583506","7":[{"8":"MyISAM引擎使用 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"B+Tree ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"作为索引结构，叶子节点的data域存放的是 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"数据记录的地址 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"OZdl-1658473655292","4":{"l":"h2"},"5":[{"2":"2","3":"w87L-1658473655291","7":[{"8":"MyISAM","9":[{"0":"#34495e","2":"c"}]},{"8":"索引的原理","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"7Y2g-1658473495145","4":{"version":1},"5":[{"2":"2","3":"kWo2-1658473495143","7":[{"8":"我们知道InnoDB中索引即数据，也就是聚簇索引的那棵B+树的叶子节点中已经把所有完整的用户记录都包含了，而MyISAM的索引方案虽然也使用树形结构，但是却将索引和数据分开存储:"}]}]},{"3":"y4Jx-1658473893381","4":{"li":"H3DZ-1658474108152","lt":"unordered","ll":1},"5":[{"2":"2","3":"4nRs-1658473893379","7":[{"8":"将表中的记录按照记录的插入顺序单独存储在一个文件中，称之为数据文件。这个文件并不划分为若千个数据页，有多少记录就往这个文件中塞多少记录就成了。由于在插入数据的时候并没有刻意按照主键大小排序，所以我们并不能在这些数据上使用二分法进行查找。"}]}],"6":"l"},{"3":"QJ7w-1658473893383","4":{"li":"H3DZ-1658474108152","lt":"unordered","ll":1},"5":[{"2":"2","3":"fM9G-1658473893382","7":[{"8":"使用MyISAM存储引擎的表会把索引信息另外存储到一个称为索引文件的另一个文件中。MyISAM会单独为表的主键创建一个索引，只不过在索引的叶子节点中存储的不是完整的用户记录，而是主键值＋数据记录地址的组合。"}]}],"6":"l"},{"3":"ikhk-1658474165142","4":{"version":1,"u":"https://note.youdao.com/yws/res/21467/WEBRESOURCE45f54a862906f79105767b807c7368d0","w":572,"h":420},"6":"im"},{"3":"jdWi-1658473495754","4":{"version":1},"5":[{"2":"2","3":"eaUb-1658473495751","7":[{"8":"这里设表一共有三列，假设我们以col1为主键，上图是一个MyISAM表的主索引 (Primary key)示意。可以看出MyISAM的索引文件仅仅保存数据记录的地址。在MyISAM中，主键索引和二级索引 (Secondary key)在结构上没有任何区别，只是主键索引要求key是唯一的，而二级索引的key可以重复。如果我们在col2上建立一个二级索引，则此索引的结构如下图所示:"}]}]},{"3":"jsSE-1658474221643","4":{"version":1,"u":"https://note.youdao.com/yws/res/21470/WEBRESOURCEfb0ec0b3cd82a634051b81afbc81f585","w":572,"h":419},"6":"im"},{"3":"cVnZ-1658473495951","4":{"l":"h2"},"5":[{"2":"2","3":"1LPV-1658473495948","7":[{"8":"MyISAM ","9":[{"0":"#34495e","2":"c"}]},{"8":"与 ","9":[{"2":"b"},{"0":"#34495e","2":"c"}]},{"8":"InnoDB","9":[{"0":"#34495e","2":"c"}]},{"8":"对比 ","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"q2gG-1658473496045","4":{"version":1},"5":[{"2":"2","3":"iN4u-1658473496042","7":[{"8":"MyISAM","9":[{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"的索引方式都是","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"“","9":[{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"非聚簇","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"”","9":[{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"的，与","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"InnoDB","9":[{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"包含","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"1","9":[{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"个聚簇索引是不同的。小结两种引擎中索引的区别：","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"bZ4c-1658474333977","4":{"version":1},"5":[{"2":"2","3":"e7Ae-1658474333976","7":[{"8":"① 在InnoDB存储引擎中，我们只需要根据主键值对 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"聚簇索引 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"进行一次查找就能找到对应的记录，而在","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"MyISAM ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"中却需要进行一次 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"回表 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"操作，意味着MyISAM中建立的索引相当于全部都是 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"二级索引 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"5FId-1658474333981","4":{"version":1},"5":[{"2":"2","3":"E0LA-1658474333980","7":[{"8":"② InnoDB的数据文件本身就是索引文件，而MyISAM索引文件和数据文件是 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"分离的 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，索引文件仅保存数据记录的地址。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"JYO5-1658474333986","4":{"version":1},"5":[{"2":"2","3":"6gqa-1658474333985","7":[{"8":"③ InnoDB的非聚簇索引data域存储相应记录 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"主键的值 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"，而MyISAM索引记录的是 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"地址 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。换句话说，InnoDB的所有非聚簇索引都引用主键作为data域。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"d1uZ-1658474333990","4":{"version":1},"5":[{"2":"2","3":"6f5c-1658474333989","7":[{"8":"④ MyISAM的回表操作是十分 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"快速 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"的，因为是拿着地址偏移量直接到文件中取数据的，反观InnoDB是通过获取主键之后再去聚簇索引里找记录，虽然说也不慢，但还是比不上直接用地址去访问。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"fCUR-1658474333994","4":{"version":1},"5":[{"2":"2","3":"IW0O-1658474333993","7":[{"8":"⑤ InnoDB要求表 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"必须有主键 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"（ ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"MyISAM","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"可以没有 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"）。如果没有显式指定，则MySQL系统会自动选择一个可以非空且唯一标识数据记录的列作为主键。如果不存在这种列，则MySQL自动为InnoDB表生成一个隐含字段作为主键，这个字段长度为6个字节，类型为长整型。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"kRe3-1658473496164","4":{"l":"h1"},"5":[{"2":"2","3":"TcVK-1658473496162","7":[{"8":"索引的代价","9":[{"2":"b"},{"0":"#34495e","2":"c"}]}]}],"6":"h"},{"3":"fRr0-1658473496254","4":{"version":1},"5":[{"2":"2","3":"nYzT-1658473496252","7":[{"8":"空间上的代价","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"8CGS-1658474603775","4":{"version":1},"5":[{"2":"2","3":"3A88-1658474603774","7":[{"8":"每建立一个索引都要为它建立一棵B+树，每一棵B+树的每一个节点都是一个数据页，一个页默认会占用 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"16KB ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"}]},{"8":"的存储空间，一棵很大的B+树由许多数据页组成，那就是很大的一片存储空间。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"EbIm-1658474603780","4":{"version":1},"5":[{"2":"2","3":"yXyM-1658474603779","7":[{"8":"时间上的代价","9":[{"2":"b"},{"0":"#880000","2":"c"},{"0":16,"2":"fs"}]},{"8":"每次对表中的数据进行 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"增、删、改 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"操作时，都需要去修改各个B+树索引。而且我们讲过，B+树每层节点都是按照索引列的值 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"从小到大的顺序排序 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"而组成了 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"双向链表 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"。不论是叶子节点中的记录，还是内节点中的记录（也就是不论是用户记录还是目录项记录）都是按照索引列的值从小到大的顺序而形成了一个单向链表。而增、删、改操作可能会对节点和记录的排序造成破坏，所以存储引擎需要额外的时间进行一些 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"记录移位 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"， ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"页面分裂 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"、 ","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]},{"8":"页面回收 ","9":[{"0":"#e96900","2":"c"},{"0":16,"2":"fs"},{"0":"NSimSun","2":"ff"}]},{"8":"等操作来维护好节点和记录的排序。如果我们建了许多索引，每个索引对应的B+树都要进行相关的维护操作，会给性能拖后腿。","9":[{"0":"#34495e","2":"c"},{"0":16,"2":"fs"}]}]}]},{"3":"d1OE-1658473496345","4":{"version":1},"5":[{"2":"2","3":"zYvs-1658473496342","7":[{"8":"一个表上索引建的越多，就会占用越多的存储空间，在增删改记录的时候性能就越差。为了能建立又好又少的索引，我们得学学这些索引在哪些条件下起作用的。","9":[{"2":"inlineCode"}]}]}]}],"title":"","__compress__":true}