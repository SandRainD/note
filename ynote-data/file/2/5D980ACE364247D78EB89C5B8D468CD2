<?xml version="1.0" encoding="UTF-8" standalone="no"?><note xmlns="http://note.youdao.com" file-version="0" schema-version="1.0.3"><head><list id="6074-1635849388299" type="unordered"/><list id="6287-1635853204039" type="unordered"/><list id="6021-1635853988838" type="unordered"/></head><body><para><coId>8028-1635849039654</coId><text>主机数据更新后根据配置和策略， 自动同步到备机的master/slaver机制，Master以写为主，Slave以读为主</text><inline-styles><bold><from>40</from><to>60</to><value>true</value></bold><font-family><from>51</from><to>56</to><value>Times New Roman</value></font-family><color><from>24</from><to>39</to><value>#ff0000</value></color><color><from>40</from><to>60</to><value>#ff0000</value></color></inline-styles><styles><align>justify</align></styles></para><list-item level="1" list-id="6074-1635849388299"><coId>9683-1635849388300</coId><text>读写分离，性能扩展</text><inline-styles/><styles/></list-item><list-item level="1" list-id="6074-1635849388299"><coId>0038-1635849388300</coId><text>容灾快速恢复</text><inline-styles/><styles/></list-item><image><coId>0074-1635849394608</coId><source>https://note.youdao.com/yws/res/14301/83DAE5DF7508415383A3E4CE87BAE111</source><text/><styles><width>324</width><height>206</height></styles></image><para><coId>1350-1635849394608</coId><text/><inline-styles/><styles/></para><para><coId>1190-1635851441695</coId><text>1.1.   怎么玩：主从复制</text><inline-styles><bold><from>0</from><to>4</to><value>true</value></bold><bold><from>7</from><to>15</to><value>true</value></bold><font-family><from>0</from><to>7</to><value>Times New Roman</value></font-family><font-family><from>7</from><to>15</to><value>SimHei</value></font-family><font-size><from>0</from><to>4</to><value>21</value></font-size><font-size><from>4</from><to>7</to><value>9</value></font-size><font-size><from>7</from><to>15</to><value>21</value></font-size></inline-styles><styles><align>justify</align></styles></para><para><coId>1723-1635851442155</coId><text>拷贝多个redis.conf文件include(写绝对路径)</text><inline-styles><font-family><from>16</from><to>24</to><value>Times New Roman</value></font-family><font-family><from>29</from><to>30</to><value>Times New Roman</value></font-family></inline-styles><styles/></para><para><coId>6545-1635851442155</coId><text>开启daemonize yes</text><inline-styles><color><from>0</from><to>15</to><value>#007c6a</value></color></inline-styles><styles/></para><para><coId>1018-1635851442155</coId><text>Pid文件名字pidfile</text><inline-styles><font-family><from>7</from><to>14</to><value>Times New Roman</value></font-family></inline-styles><styles/></para><para><coId>7991-1635851442155</coId><text>指定端口port</text><inline-styles/><styles/></para><para><coId>4450-1635851442155</coId><text>Log文件名字</text><inline-styles><color><from>0</from><to>7</to><value>#007c6a</value></color></inline-styles><styles/></para><para><coId>3570-1635851442155</coId><text>dump.rdb名字dbfilename</text><inline-styles><font-family><from>10</from><to>20</to><value>Times New Roman</value></font-family></inline-styles><styles/></para><para><coId>3810-1635851442155</coId><text>Appendonly 关掉或者换名字</text><inline-styles><color><from>0</from><to>18</to><value>#007c6a</value></color></inline-styles><styles/></para><para><coId>7610-1635851454199</coId><text/><inline-styles/><styles/></para><para><coId>5469-1635851454560</coId><text>新建redis6379.conf，填写以下内容</text><inline-styles><bold><from>0</from><to>23</to><value>true</value></bold><font-family><from>0</from><to>23</to><value>SimSun</value></font-family><font-size><from>0</from><to>23</to><value>21</value></font-size></inline-styles><styles><align>justify</align></styles></para><para><coId>9158-1635851455030</coId><text>include /myredis/redis.conf   //引入公共部分</text><inline-styles/><styles/></para><para><coId>3423-1635851455030</coId><text>pidfile /var/run/redis_6379.pid   //写入pid</text><inline-styles/><styles/></para><para><coId>1300-1635851455030</coId><text>port 6379   //端口设置</text><inline-styles/><styles/></para><para><coId>1014-1635851455030</coId><text>dbfilename dump6379.rdb   //设置rdb name</text><inline-styles/><styles/></para><image><coId>5092-1635851506539</coId><source>https://note.youdao.com/yws/res/14312/EBC7A2F6B93A436FB0B43D6FA027EAD5</source><text/><styles><width>265</width><height>70</height></styles></image><para><coId>7768-1635851465545</coId><text>新建redis6380.conf，填写以下内容</text><inline-styles><bold><from>0</from><to>23</to><value>true</value></bold><font-family><from>0</from><to>23</to><value>SimSun</value></font-family><font-size><from>0</from><to>23</to><value>21</value></font-size></inline-styles><styles><align>justify</align></styles></para><image><coId>8268-1635851495012</coId><source>https://note.youdao.com/yws/res/14308/A90E0E266DDA411EA1D5FE845962310A</source><text/><styles><width>273</width><height>76</height></styles></image><para><coId>3133-1635851470917</coId><text>新建redis6381.conf，填写以下内容</text><inline-styles><bold><from>0</from><to>23</to><value>true</value></bold><font-family><from>0</from><to>23</to><value>SimSun</value></font-family><font-size><from>0</from><to>23</to><value>21</value></font-size></inline-styles><styles><align>justify</align></styles></para><image><coId>5626-1635851513533</coId><source>https://note.youdao.com/yws/res/14315/37BA4A66902948CBA80A2DE32D43666B</source><text/><styles><width>270</width><height>79</height></styles></image><para><coId>3022-1635851513533</coId><text>slave-priority 10（已更名为replica-priority）</text><inline-styles><color><from>17</from><to>39</to><value>#007c6a</value></color><back-color><from>0</from><to>17</to><value>#ffff00</value></back-color></inline-styles><styles><align>justify</align></styles></para><para><coId>2096-1635851526116</coId><text>设置从机的优先级，值越小，优先级越高，用于选举主机时使用。默认100</text><inline-styles><color><from>0</from><to>34</to><value>#007c6a</value></color></inline-styles><styles/></para><para><coId>3879-1635851535200</coId><text>启动三台redis服务器</text><inline-styles><bold><from>0</from><to>12</to><value>true</value></bold><font-family><from>0</from><to>12</to><value>SimSun</value></font-family><font-size><from>0</from><to>12</to><value>21</value></font-size></inline-styles><styles><align>justify</align></styles></para><image><coId>8370-1635851541683</coId><source>https://note.youdao.com/yws/res/14319/1C8D7FDCEEFF442585645403C703A673</source><text/><styles><width>428</width><height>68</height></styles></image><para><coId>8997-1635851541683</coId><text>  查看系统进程，看看三台服务器是否启动</text><inline-styles><bold><from>2</from><to>20</to><value>true</value></bold><font-family><from>0</from><to>2</to><value>Times New Roman</value></font-family><font-family><from>2</from><to>20</to><value>SimSun</value></font-family><font-size><from>0</from><to>2</to><value>9</value></font-size><font-size><from>2</from><to>20</to><value>21</value></font-size></inline-styles><styles><align>justify</align></styles></para><para><coId>6220-1635851552196</coId><text>ps -ef|grep redis</text><inline-styles><bold><from>0</from><to>17</to><value>true</value></bold><font-family><from>0</from><to>17</to><value>SimSun</value></font-family><font-size><from>0</from><to>17</to><value>21</value></font-size></inline-styles><styles><align>justify</align></styles></para><para><coId>1550-1635851579126</coId><text>查看三台主机运行情况</text><inline-styles><bold><from>0</from><to>10</to><value>true</value></bold><font-family><from>0</from><to>10</to><value>SimSun</value></font-family><font-size><from>0</from><to>10</to><value>21</value></font-size></inline-styles><styles><align>justify</align></styles></para><para><coId>5219-1635852404879</coId><text>redis -p 6379   通过端口号链接redis服务器</text><inline-styles/><styles/></para><para><coId>8948-1635851579622</coId><text>info replication   打印主从复制的相关信息</text><inline-styles><font-size><from>19</from><to>30</to><value>12</value></font-size></inline-styles><styles/></para><para><coId>8294-1635852556404</coId><text/><inline-styles/><styles/></para><heading compat="true" level="1"><coId>7099-1635852556936</coId><text>配置主从服务</text><inline-styles><bold><from>0</from><to>6</to><value>true</value></bold><font-size><from>0</from><to>6</to><value>28</value></font-size></inline-styles><styles/></heading><para><coId>8334-1635852568327</coId><text>slaveof  &lt;ip&gt;&lt;port&gt;   成为某个实例的从服务器</text><inline-styles/><styles/></para><para><coId>7050-1635852692686</coId><text>在主机上写，在从机上可以读取数据，在从机上写数据报错</text><inline-styles/><styles/></para><para><coId>2179-1635852710028</coId><text>主机挂掉，重启就行，一切如初</text><inline-styles/><styles/></para><para><coId>3276-1635852716895</coId><text>从机重启需重设：slaveof 127.0.0.1 6379即重新设置从机命令</text><inline-styles/><styles/></para><para><coId>2341-1635852741758</coId><text>可以将配置增加到文件中。永久生效：</text><inline-styles/><styles/></para><image><coId>7212-1635852751453</coId><source>https://note.youdao.com/yws/res/14343/3A47612A13A949D69D4A3D070C95784C</source><text/><styles><width>549</width><height>253</height></styles></image><para><coId>3160-1635853147887</coId><text>复制原理</text><inline-styles><bold><from>0</from><to>4</to><value>true</value></bold><font-family><from>0</from><to>4</to><value>SimHei</value></font-family><font-size><from>0</from><to>4</to><value>21</value></font-size></inline-styles><styles><align>justify</align></styles></para><list-item level="1" list-id="6287-1635853204039"><coId>3164-1635853204045</coId><text>Slave启动成功连接到master后会发送一个sync命令</text><inline-styles><font-family><from>12</from><to>18</to><value>Times New Roman</value></font-family><font-family><from>24</from><to>28</to><value>Times New Roman</value></font-family></inline-styles><styles/></list-item><list-item level="1" list-id="6287-1635853204039"><coId>6097-1635853204045</coId><text>Master接到命令启动后台的存盘进程，同时收集所有接收到的用于修改数据集命令， 在后台进程执行完毕之后，master将传送整个数据文件到slave,以完成一次完全同步</text><inline-styles><font-family><from>53</from><to>59</to><value>Times New Roman</value></font-family><font-family><from>69</from><to>75</to><value>Times New Roman</value></font-family></inline-styles><styles/></list-item><list-item level="1" list-id="6287-1635853204039"><coId>8583-1635853204045</coId><text>全量复制：而slave服务在接收到数据库文件数据后，将其存盘并加载到内存中。</text><inline-styles/><styles/></list-item><list-item level="1" list-id="6287-1635853204039"><coId>0040-1635853204045</coId><text>增量复制：Master继续将新的所有收集到的修改命令依次传给slave,完成同步</text><inline-styles><font-family><from>30</from><to>36</to><value>Times New Roman</value></font-family><font-size><from>2</from><to>4</to><value>16</value></font-size></inline-styles><styles/></list-item><list-item level="1" list-id="6287-1635853204039"><coId>6052-1635853204045</coId><text>但是只要是重新连接master,一次完全同步（全量复制)将被自动执行</text><inline-styles><font-family><from>27</from><to>28</to><value>Times New Roman</value></font-family></inline-styles><styles/></list-item><image><coId>5134-1635853147887</coId><source>https://note.youdao.com/yws/res/14345/30F0E400EA8040CA84D02D7F29FD3C3F</source><text/><styles><width>620</width><height>133</height></styles></image><para><coId>2360-1635853147887</coId><text/><inline-styles/><styles/></para><para><coId>5162-1635853207757</coId><text>薪火相传</text><inline-styles><bold><from>0</from><to>4</to><value>true</value></bold><font-family><from>0</from><to>4</to><value>SimSun</value></font-family><font-size><from>0</from><to>4</to><value>21</value></font-size></inline-styles><styles><align>justify</align></styles></para><para><coId>9879-1635853370512</coId><text>上一个Slave可以是下一个slave的Master，Slave同样可以接收其他 slaves的连接和同步请求，那么该slave作为了链条中下一个的master, 可以有效减轻master的写压力,去中心化降低风险。</text><inline-styles><font-family><from>14</from><to>19</to><value>Times New Roman</value></font-family><font-family><from>20</from><to>26</to><value>Times New Roman</value></font-family><font-family><from>27</from><to>32</to><value>Times New Roman</value></font-family><font-family><from>41</from><to>47</to><value>Times New Roman</value></font-family><font-family><from>59</from><to>64</to><value>Times New Roman</value></font-family><font-family><from>74</from><to>82</to><value>Times New Roman</value></font-family><font-family><from>88</from><to>94</to><value>Times New Roman</value></font-family><font-family><from>98</from><to>99</to><value>Times New Roman</value></font-family></inline-styles><styles><align>justify</align></styles></para><para><coId>8935-1635853370848</coId><text>用 slaveof  &lt;ip&gt;&lt;port&gt;</text><inline-styles><color><from>0</from><to>21</to><value>#007c6a</value></color></inline-styles><styles/></para><para><coId>1926-1635853370848</coId><text>中途变更转向:会清除之前的数据，重新建立拷贝最新的</text><inline-styles><color><from>0</from><to>25</to><value>#007c6a</value></color></inline-styles><styles/></para><para><coId>5046-1635853370848</coId><text>风险是一旦某个slave宕机，后面的slave都没法备份</text><inline-styles><font-family><from>18</from><to>23</to><value>Times New Roman</value></font-family><color><from>0</from><to>28</to><value>#007c6a</value></color></inline-styles><styles/></para><para><coId>5470-1635853370848</coId><text>主机挂了，从机还是从机，无法写数据了</text><inline-styles><color><from>0</from><to>18</to><value>#007c6a</value></color></inline-styles><styles/></para><para><coId>6639-1635853436897</coId><text/><inline-styles/><styles/></para><para><coId>3558-1635853431760</coId><text>反客为主</text><inline-styles><bold><from>0</from><to>4</to><value>true</value></bold><font-family><from>0</from><to>4</to><value>SimSun</value></font-family><font-size><from>0</from><to>4</to><value>21</value></font-size></inline-styles><styles/></para><para><coId>8848-1635853438790</coId><text>当一个master宕机后，后面的slave可以立刻升为master，其后面的slave不用做任何修改。</text><inline-styles><font-family><from>16</from><to>21</to><value>Times New Roman</value></font-family><font-family><from>27</from><to>33</to><value>Times New Roman</value></font-family><font-family><from>38</from><to>43</to><value>Times New Roman</value></font-family></inline-styles><styles/></para><para><coId>9167-1635853453734</coId><text>用 slaveof  no one  将从机变为主机。</text><inline-styles><font-size><from>2</from><to>18</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>4060-1635853522295</coId><text/><inline-styles/><styles/></para><para><coId>1473-1635853522454</coId><text>哨兵模式(sentinel)</text><inline-styles><bold><from>0</from><to>14</to><value>true</value></bold><font-family><from>0</from><to>4</to><value>SimHei</value></font-family><font-family><from>4</from><to>14</to><value>Arial</value></font-family><font-size><from>0</from><to>14</to><value>21</value></font-size></inline-styles><styles><align>justify</align></styles></para><para><coId>9940-1635853533719</coId><text>反客为主的自动版，能够后台监控主机是否故障，如果故障了根据投票数自动将从库转换为主库</text><inline-styles><bold><from>0</from><to>8</to><value>true</value></bold><color><from>0</from><to>8</to><value>#ff0000</value></color></inline-styles><styles><align>justify</align></styles></para><list-item level="1" list-id="6021-1635853988838"><coId>7278-1635853561824</coId><text>调整为一主二仆模式，6379带着6380、6381</text><inline-styles/><styles><align>justify</align></styles></list-item><list-item level="1" list-id="6021-1635853988838"><coId>6045-1635853962735</coId><text>自定义的/myredis目录下新建sentinel.conf文件，名字绝不能错</text><inline-styles/><styles><align>justify</align></styles></list-item><list-item level="1" list-id="6021-1635853988838"><coId>6583-1635853968778</coId><text>配置哨兵,填写内容</text><inline-styles/><styles><align>justify</align></styles></list-item><para><coId>2300-1635853975914</coId><text>sentinel monitor mymaster 127.0.0.1 6379 1</text><inline-styles/><styles><align>justify</align><text-indent>3</text-indent></styles></para><para><coId>5582-1635853981121</coId><text>其中mymaster为监控对象起的服务器名称， 1 为至少有多少个哨兵同意迁移的数量。</text><inline-styles/><styles><align>justify</align><text-indent>3</text-indent></styles></para><para><coId>8050-1635853999536</coId><text>启动哨兵</text><inline-styles><bold><from>0</from><to>4</to><value>true</value></bold><font-family><from>0</from><to>4</to><value>SimSun</value></font-family><font-size><from>0</from><to>4</to><value>18</value></font-size></inline-styles><styles><align>justify</align></styles></para><para><coId>8466-1635854017916</coId><text>/usr/local/bin</text><inline-styles/><styles><align>justify</align></styles></para><para><coId>9997-1635854016090</coId><text>redis做压测可以用自带的redis-benchmark工具</text><inline-styles><color><from>14</from><to>29</to><value>#ff0000</value></color></inline-styles><styles/></para><para><coId>9295-1635854023590</coId><text>执行redis-sentinel  /myredis/sentinel.conf</text><inline-styles><color><from>0</from><to>40</to><value>#007c6a</value></color></inline-styles><styles/></para><para><coId>4748-1635854225714</coId><text>当主机挂掉，从机选举中产生新的主机</text><inline-styles><bold><from>0</from><to>17</to><value>true</value></bold><font-family><from>0</from><to>17</to><value>SimSun</value></font-family><font-size><from>0</from><to>17</to><value>18</value></font-size></inline-styles><styles><align>justify</align></styles></para><para><coId>8044-1635854225981</coId><text>(大概10秒左右可以看到哨兵窗口日志，切换了新的主机)</text><inline-styles><font-family><from>0</from><to>1</to><value>Times New Roman</value></font-family><font-family><from>26</from><to>27</to><value>Times New Roman</value></font-family></inline-styles><styles/></para><para><coId>1930-1635854225981</coId><text>哪个从机会被选举为主机呢？根据优先级别：slave-priority（已更名为replica-priority）</text><inline-styles><color><from>20</from><to>56</to><value>#007c6a</value></color></inline-styles><styles/></para><para><coId>5311-1635854225981</coId><text>原主机重启后会变为从机。</text><inline-styles><color><from>0</from><to>12</to><value>#007c6a</value></color></inline-styles><styles/></para><para><coId>4036-1635854587301</coId><text>复制延时</text><inline-styles><bold><from>0</from><to>4</to><value>true</value></bold><font-family><from>0</from><to>4</to><value>SimSun</value></font-family><font-size><from>0</from><to>4</to><value>18</value></font-size></inline-styles><styles><align>justify</align></styles></para><para><coId>8860-1635854587535</coId><text>由于所有的写操作都是先在Master上操作，然后同步更新到Slave上，所以从Master同步到Slave机器有一定的延迟，当系统很繁忙的时候，延迟问题会更加严重，Slave机器数量的增加也会使这个问题更加严重。</text><inline-styles><font-family><from>29</from><to>34</to><value>Times New Roman</value></font-family><font-family><from>39</from><to>45</to><value>Times New Roman</value></font-family><font-family><from>48</from><to>53</to><value>Times New Roman</value></font-family><font-family><from>82</from><to>87</to><value>Times New Roman</value></font-family></inline-styles><styles/></para><para><coId>1687-1635854921144</coId><text/><inline-styles/><styles/></para><para><coId>7270-1635854921298</coId><text/><inline-styles/><styles/></para><para><coId>1427-1635854921427</coId><text>主从复制</text><inline-styles/><styles/></para><para><coId>8077-1635854731003</coId><text>private static JedisSentinelPool jedisSentinelPool=null;</text><inline-styles><bold><from>0</from><to>15</to><value>true</value></bold><bold><from>51</from><to>55</to><value>true</value></bold><italic><from>33</from><to>50</to><value>true</value></italic><font-family><from>0</from><to>56</to><value>SimSun</value></font-family><font-size><from>0</from><to>56</to><value>15</value></font-size><color><from>0</from><to>15</to><value>#000080</value></color><color><from>33</from><to>50</to><value>#660e7a</value></color><color><from>51</from><to>55</to><value>#000080</value></color></inline-styles><styles/></para><para><coId>1374-1635854918266</coId><text/><inline-styles/><styles/></para><para><coId>4933-1635854918266</coId><text>public static  Jedis getJedisFromSentinel(){</text><inline-styles><bold><from>0</from><to>15</to><value>true</value></bold><font-family><from>0</from><to>44</to><value>SimSun</value></font-family><font-size><from>0</from><to>44</to><value>15</value></font-size><color><from>0</from><to>15</to><value>#000080</value></color></inline-styles><styles/></para><para><coId>4046-1635854918266</coId><text>if(jedisSentinelPool==null){</text><inline-styles><bold><from>0</from><to>2</to><value>true</value></bold><bold><from>22</from><to>26</to><value>true</value></bold><italic><from>3</from><to>20</to><value>true</value></italic><font-family><from>0</from><to>28</to><value>SimSun</value></font-family><font-size><from>0</from><to>28</to><value>15</value></font-size><color><from>0</from><to>2</to><value>#000080</value></color><color><from>3</from><to>20</to><value>#660e7a</value></color><color><from>22</from><to>26</to><value>#000080</value></color></inline-styles><styles/></para><para><coId>2532-1635854918266</coId><text>            Set&lt;String&gt; sentinelSet=new HashSet&lt;&gt;();</text><inline-styles><bold><from>36</from><to>40</to><value>true</value></bold><font-family><from>0</from><to>52</to><value>SimSun</value></font-family><font-size><from>0</from><to>52</to><value>15</value></font-size><color><from>36</from><to>40</to><value>#000080</value></color></inline-styles><styles/></para><para><coId>3351-1635854918266</coId><text>            sentinelSet.add("192.168.11.103:26379");</text><inline-styles><bold><from>28</from><to>50</to><value>true</value></bold><font-family><from>0</from><to>52</to><value>SimSun</value></font-family><font-size><from>0</from><to>52</to><value>15</value></font-size><color><from>28</from><to>50</to><value>#008000</value></color></inline-styles><styles/></para><para><coId>5892-1635854918266</coId><text/><inline-styles/><styles/></para><para><coId>1346-1635854918266</coId><text>            JedisPoolConfig jedisPoolConfig =new JedisPoolConfig();</text><inline-styles><bold><from>45</from><to>49</to><value>true</value></bold><font-family><from>0</from><to>67</to><value>SimSun</value></font-family><font-size><from>0</from><to>67</to><value>15</value></font-size><color><from>45</from><to>49</to><value>#000080</value></color></inline-styles><styles/></para><para><coId>9649-1635854918266</coId><text>            jedisPoolConfig.setMaxTotal(10); //最大可用连接数</text><inline-styles><italic><from>45</from><to>54</to><value>true</value></italic><font-family><from>0</from><to>54</to><value>SimSun</value></font-family><font-size><from>0</from><to>54</to><value>15</value></font-size><color><from>40</from><to>42</to><value>#0000ff</value></color><color><from>45</from><to>54</to><value>#808080</value></color></inline-styles><styles/></para><para><coId>7912-1635854918266</coId><text>jedisPoolConfig.setMaxIdle(5); //最大闲置连接数</text><inline-styles><italic><from>31</from><to>40</to><value>true</value></italic><font-family><from>0</from><to>40</to><value>SimSun</value></font-family><font-size><from>0</from><to>40</to><value>15</value></font-size><color><from>27</from><to>28</to><value>#0000ff</value></color><color><from>31</from><to>40</to><value>#808080</value></color></inline-styles><styles/></para><para><coId>3763-1635854918266</coId><text>jedisPoolConfig.setMinIdle(5); //最小闲置连接数</text><inline-styles><italic><from>31</from><to>40</to><value>true</value></italic><font-family><from>0</from><to>40</to><value>SimSun</value></font-family><font-size><from>0</from><to>40</to><value>15</value></font-size><color><from>27</from><to>28</to><value>#0000ff</value></color><color><from>31</from><to>40</to><value>#808080</value></color></inline-styles><styles/></para><para><coId>1775-1635854918266</coId><text>jedisPoolConfig.setBlockWhenExhausted(true); //连接耗尽是否等待</text><inline-styles><bold><from>38</from><to>42</to><value>true</value></bold><italic><from>45</from><to>55</to><value>true</value></italic><font-family><from>0</from><to>55</to><value>SimSun</value></font-family><font-size><from>0</from><to>55</to><value>15</value></font-size><color><from>38</from><to>42</to><value>#000080</value></color><color><from>45</from><to>55</to><value>#808080</value></color></inline-styles><styles/></para><para><coId>6230-1635854918266</coId><text>jedisPoolConfig.setMaxWaitMillis(2000); //等待时间</text><inline-styles><italic><from>40</from><to>46</to><value>true</value></italic><font-family><from>0</from><to>46</to><value>SimSun</value></font-family><font-size><from>0</from><to>46</to><value>15</value></font-size><color><from>33</from><to>37</to><value>#0000ff</value></color><color><from>40</from><to>46</to><value>#808080</value></color></inline-styles><styles/></para><para><coId>9820-1635854918266</coId><text>jedisPoolConfig.setTestOnBorrow(true); //取连接的时候进行一下测试 ping pong</text><inline-styles><bold><from>32</from><to>36</to><value>true</value></bold><italic><from>39</from><to>63</to><value>true</value></italic><font-family><from>0</from><to>63</to><value>SimSun</value></font-family><font-size><from>0</from><to>63</to><value>15</value></font-size><color><from>32</from><to>36</to><value>#000080</value></color><color><from>39</from><to>63</to><value>#808080</value></color></inline-styles><styles/></para><para><coId>5696-1635854918266</coId><text/><inline-styles/><styles/></para><para><coId>6315-1635854918266</coId><text>jedisSentinelPool=new JedisSentinelPool("mymaster",sentinelSet,jedisPoolConfig);</text><inline-styles><bold><from>18</from><to>22</to><value>true</value></bold><bold><from>40</from><to>50</to><value>true</value></bold><italic><from>0</from><to>17</to><value>true</value></italic><font-family><from>0</from><to>80</to><value>SimSun</value></font-family><font-size><from>0</from><to>80</to><value>15</value></font-size><color><from>0</from><to>17</to><value>#660e7a</value></color><color><from>18</from><to>22</to><value>#000080</value></color><color><from>40</from><to>50</to><value>#008000</value></color></inline-styles><styles/></para><para><coId>1161-1635854918266</coId><text>return jedisSentinelPool.getResource();</text><inline-styles><bold><from>0</from><to>7</to><value>true</value></bold><italic><from>7</from><to>24</to><value>true</value></italic><font-family><from>0</from><to>39</to><value>SimSun</value></font-family><font-size><from>0</from><to>39</to><value>15</value></font-size><color><from>0</from><to>7</to><value>#000080</value></color><color><from>7</from><to>24</to><value>#660e7a</value></color></inline-styles><styles/></para><para><coId>6368-1635854918266</coId><text>        }else{</text><inline-styles><bold><from>9</from><to>13</to><value>true</value></bold><font-family><from>0</from><to>14</to><value>SimSun</value></font-family><font-size><from>0</from><to>14</to><value>15</value></font-size><color><from>9</from><to>13</to><value>#000080</value></color></inline-styles><styles/></para><para><coId>2164-1635854918266</coId><text>return jedisSentinelPool.getResource();</text><inline-styles><bold><from>0</from><to>7</to><value>true</value></bold><italic><from>7</from><to>24</to><value>true</value></italic><font-family><from>0</from><to>39</to><value>SimSun</value></font-family><font-size><from>0</from><to>39</to><value>15</value></font-size><color><from>0</from><to>7</to><value>#000080</value></color><color><from>7</from><to>24</to><value>#660e7a</value></color></inline-styles><styles/></para><para><coId>7769-1635854918266</coId><text>        }</text><inline-styles><font-family><from>0</from><to>9</to><value>SimSun</value></font-family><font-size><from>0</from><to>9</to><value>15</value></font-size></inline-styles><styles/></para><para><coId>5786-1635854918266</coId><text>}</text><inline-styles><font-family><from>0</from><to>1</to><value>SimSun</value></font-family><font-size><from>0</from><to>1</to><value>15</value></font-size></inline-styles><styles/></para></body></note>