<?xml version="1.0" encoding="UTF-8" standalone="no"?><note xmlns="http://note.youdao.com" file-version="0" schema-version="1.0.3"><head/><body><para><coId>8215-1641436223143</coId><text/><inline-styles/><styles/></para><table><coId>2551-1641436243048</coId><resource-list/><content>{"cells":[{"value":"@RestController\npublic class RateLimitController\n{\n    @GetMapping(\"/byResource\")\n    @SentinelResource(value = \"byResource\",blockHandler = \"handleException\")\n    public CommonResult byResource()\n    {\n        return new CommonResult(200,\"按资源名称限流测试OK\",new Payment(2020L,\"serial001\"));\n    }\n    public CommonResult handleException(BlockException exception)\n    {\n        return new CommonResult(444,exception.getClass().getCanonicalName()+\"\\t 服务不可用\");\n    }\n    @GetMapping(\"/rateLimit/byUrl\")\n    @SentinelResource(value = \"byUrl\")\n    public CommonResult byUrl()\n    {\n        return new CommonResult(200,\"按url限流测试OK\",new Payment(2020L,\"serial002\"));\n    }\n}"}],"heights":[40],"widths":[620]}</content><styles/></table><para><coId>8416-1641436314917</coId><text/><inline-styles/><styles/></para><attach><coId>1661-1641436314917</coId><source>https://note.youdao.com/yws/res/16693/433F021724FE47F392DCFF095D736A6B</source><resource>https://note.youdao.com/yws/res/16694/D847E82CE36F4AFFB66EC91A96B43E92</resource><filename>cloudalibaba-sentinel8401.zip</filename><filelength>5726</filelength><styles/></attach><para><coId>3944-1641436314917</coId><text>面临的问题：</text><inline-styles><font-size><from>0</from><to>6</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>1516-1641436326523</coId><text>1、限流的配置不能持久化</text><inline-styles><font-size><from>0</from><to>12</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>9367-1641436338524</coId><text>2、url限流相比于资源名限流，url限流无法返回自定义的友好提示</text><inline-styles><font-size><from>0</from><to>33</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>5589-1641436449548</coId><text/><inline-styles/><styles/></para><image><coId>7031-1641436450285</coId><source>https://note.youdao.com/yws/res/16689/808087B086B640FE8723746FE1D1C209</source><text/><styles><width>620</width><height>206</height></styles></image><heading compat="true" level="1"><coId>3953-1641436450285</coId><text>自定义blockhandler</text><inline-styles><bold><from>0</from><to>15</to><value>true</value></bold><font-size><from>0</from><to>15</to><value>28</value></font-size></inline-styles><styles/></heading><table><coId>6024-1641437264812</coId><resource-list/><content>{"cells":[{"value":"public class CustomerBlockHandler {\n    public static CommonResult handleException(BlockException exception){\n        return new CommonResult(2020,\"自定义的限流处理信息......CustomerBlockHandler\");\n    }\n    public static CommonResult handleException2(BlockException exception){\n        return new CommonResult(2020,\"自定义的限流处理信息2......CustomerBlockHandler2\");\n    }\n}","inlineStyles":{"font-family":[{"from":148,"to":158,"value":"SimSun"},{"from":307,"to":317,"value":"SimSun"}],"font-size":[{"from":0,"to":35,"value":13},{"from":36,"to":109,"value":13},{"from":110,"to":187,"value":13},{"from":188,"to":193,"value":13},{"from":194,"to":268,"value":13},{"from":269,"to":348,"value":13},{"from":349,"to":354,"value":13},{"from":355,"to":356,"value":13}],"color":[{"from":0,"to":13,"value":"#cc7832"},{"from":13,"to":35,"value":"#a9b7c6"},{"from":36,"to":40,"value":"#a9b7c6"},{"from":40,"to":54,"value":"#cc7832"},{"from":54,"to":67,"value":"#a9b7c6"},{"from":67,"to":82,"value":"#ffc66d"},{"from":82,"to":109,"value":"#a9b7c6"},{"from":110,"to":118,"value":"#a9b7c6"},{"from":118,"to":129,"value":"#cc7832"},{"from":129,"to":142,"value":"#a9b7c6"},{"from":142,"to":146,"value":"#6897bb"},{"from":146,"to":147,"value":"#cc7832"},{"from":147,"to":185,"value":"#6a8759"},{"from":185,"to":186,"value":"#a9b7c6"},{"from":186,"to":187,"value":"#cc7832"},{"from":188,"to":192,"value":"#cc7832"},{"from":192,"to":193,"value":"#a9b7c6"},{"from":194,"to":198,"value":"#a9b7c6"},{"from":198,"to":212,"value":"#cc7832"},{"from":212,"to":225,"value":"#a9b7c6"},{"from":225,"to":241,"value":"#ffc66d"},{"from":241,"to":268,"value":"#a9b7c6"},{"from":269,"to":277,"value":"#a9b7c6"},{"from":277,"to":288,"value":"#cc7832"},{"from":288,"to":301,"value":"#a9b7c6"},{"from":301,"to":305,"value":"#6897bb"},{"from":305,"to":306,"value":"#cc7832"},{"from":306,"to":346,"value":"#6a8759"},{"from":346,"to":347,"value":"#a9b7c6"},{"from":347,"to":348,"value":"#cc7832"},{"from":349,"to":353,"value":"#cc7832"},{"from":353,"to":354,"value":"#a9b7c6"},{"from":355,"to":356,"value":"#a9b7c6"}],"back-color":[{"from":0,"to":35,"value":"#2b2b2b"},{"from":36,"to":109,"value":"#2b2b2b"},{"from":110,"to":187,"value":"#2b2b2b"},{"from":188,"to":193,"value":"#2b2b2b"},{"from":194,"to":268,"value":"#2b2b2b"},{"from":269,"to":348,"value":"#2b2b2b"},{"from":349,"to":354,"value":"#2b2b2b"},{"from":355,"to":356,"value":"#2b2b2b"}]}}],"heights":[40],"widths":[620]}</content><styles/></table><para><coId>8999-1641437281416</coId><text/><inline-styles/><styles/></para><table><coId>5772-1641437281416</coId><resource-list/><content>{"cells":[{"value":"//customerBlockHandler\n@GetMapping(\"/rateLimit/customerBlockHandler\")\n@SentinelResource(value = \"customerBlockHandler\",blockHandlerClass = CustomerBlockHandler.class,blockHandler =\"handleException2\")\npublic CommonResult customerBlockHandler()\n{\n    return new CommonResult(200,\"自定义customerBlockHandler\",new Payment(2020L,\"serial002\"));\n}","inlineStyles":{"font-family":[{"from":278,"to":281,"value":"SimSun"}],"font-size":[{"from":0,"to":22,"value":13},{"from":23,"to":69,"value":13},{"from":70,"to":199,"value":13},{"from":200,"to":242,"value":13},{"from":243,"to":244,"value":13},{"from":245,"to":335,"value":13},{"from":336,"to":337,"value":13}],"color":[{"from":0,"to":22,"value":"#808080"},{"from":23,"to":34,"value":"#bbb529"},{"from":34,"to":35,"value":"#a9b7c6"},{"from":35,"to":68,"value":"#6a8759"},{"from":68,"to":69,"value":"#a9b7c6"},{"from":70,"to":87,"value":"#bbb529"},{"from":87,"to":96,"value":"#a9b7c6"},{"from":96,"to":118,"value":"#6a8759"},{"from":118,"to":119,"value":"#cc7832"},{"from":119,"to":160,"value":"#a9b7c6"},{"from":160,"to":166,"value":"#cc7832"},{"from":166,"to":180,"value":"#a9b7c6"},{"from":180,"to":198,"value":"#6a8759"},{"from":198,"to":199,"value":"#a9b7c6"},{"from":200,"to":207,"value":"#cc7832"},{"from":207,"to":220,"value":"#a9b7c6"},{"from":220,"to":240,"value":"#ffc66d"},{"from":240,"to":242,"value":"#a9b7c6"},{"from":243,"to":244,"value":"#a9b7c6"},{"from":245,"to":249,"value":"#a9b7c6"},{"from":249,"to":260,"value":"#cc7832"},{"from":260,"to":273,"value":"#a9b7c6"},{"from":273,"to":276,"value":"#6897bb"},{"from":276,"to":277,"value":"#cc7832"},{"from":277,"to":302,"value":"#6a8759"},{"from":302,"to":307,"value":"#cc7832"},{"from":307,"to":315,"value":"#a9b7c6"},{"from":315,"to":320,"value":"#6897bb"},{"from":320,"to":321,"value":"#cc7832"},{"from":321,"to":332,"value":"#6a8759"},{"from":332,"to":334,"value":"#a9b7c6"},{"from":334,"to":335,"value":"#cc7832"},{"from":336,"to":337,"value":"#a9b7c6"}],"back-color":[{"from":0,"to":22,"value":"#2b2b2b"},{"from":23,"to":69,"value":"#2b2b2b"},{"from":70,"to":199,"value":"#2b2b2b"},{"from":200,"to":242,"value":"#2b2b2b"},{"from":243,"to":244,"value":"#2b2b2b"},{"from":245,"to":335,"value":"#2b2b2b"},{"from":336,"to":337,"value":"#2b2b2b"}]}}],"heights":[40],"widths":[620]}</content><styles/></table><para><coId>4829-1641437210800</coId><text/><inline-styles/><styles/></para><para><coId>7760-1641436481231</coId><text/><inline-styles/><styles/></para><para><coId>0019-1641436481415</coId><text/><inline-styles/><styles/></para><para><coId>9662-1641436481563</coId><text/><inline-styles/><styles/></para></body></note>