<?xml version="1.0" encoding="UTF-8" standalone="no"?><note xmlns="http://note.youdao.com" file-version="0" schema-version="1.0.3"><head><list id="3957-1637237444932" type="unordered"/></head><body><para><coId>4241-1637236199664</coId><text>首先需要进入/usr/local/nginx/sbin目录中</text><inline-styles><font-size><from>0</from><to>30</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>9798-1637236889915</coId><text>查看nginx版本号 		 ./nginx -v</text><inline-styles><font-size><from>0</from><to>24</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>7135-1637236919612</coId><text>启动nginx			./nginx</text><inline-styles><font-size><from>0</from><to>17</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>6523-1637236943070</coId><text>关闭nginx  			./nginx -s stop</text><inline-styles><font-size><from>0</from><to>27</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>3298-1637236963550</coId><text>重加载nginx			./nginx -s reload</text><inline-styles><font-size><from>0</from><to>28</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>6055-1637236995178</coId><text/><inline-styles/><styles/></para><heading compat="true" level="1"><coId>7954-1637236995383</coId><text>nginx.conf配置文件</text><inline-styles><bold><from>0</from><to>14</to><value>true</value></bold><font-size><from>0</from><to>14</to><value>28</value></font-size><back-color><from>0</from><to>14</to><value>#f5f5f5</value></back-color></inline-styles><styles><line-height>1.5</line-height></styles></heading><para><coId>3544-1637236995540</coId><text>vim /usr/local/nginx/conf/nginx.conf</text><inline-styles><font-size><from>0</from><to>36</to><value>16</value></font-size></inline-styles><styles/></para><heading compat="true" level="2"><coId>4130-1637236876655</coId><text>配置文件中的内容（包含三部分）</text><inline-styles><bold><from>0</from><to>15</to><value>true</value></bold><font-size><from>0</from><to>15</to><value>20</value></font-size></inline-styles><styles/></heading><para><coId>8180-1637237064033</coId><text>1.全局块</text><inline-styles/><styles/></para><para><coId>8848-1637237152787</coId><text>从配置文件开始到 events 块之间的内容，主要会设置一些影响 nginx 服务器整体运行的配置指令，主要包括配置运行 Nginx 服务器的用户（组）、允许生成的 worker process 数，进程 PID 存放路径、日志存放路径和类型以及配置文件的引入等。</text><inline-styles><font-size><from>0</from><to>132</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>8260-1637237164370</coId><text>比如上面第一行配置的：</text><inline-styles><font-size><from>0</from><to>11</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>7063-1637237164370</coId><text>这是 Nginx 服务器并发处理服务的关键配置，worker_processes 值越大，可以支持的并发处理量也越多，但是会受到硬件、软件等设备的制约</text><inline-styles><font-size><from>0</from><to>75</to><value>16</value></font-size><color><from>24</from><to>58</to><value>#df402a</value></color></inline-styles><styles/></para><image><coId>9183-1637237174773</coId><source>https://note.youdao.com/yws/res/15205/A2968EA898FF4DF3B98A4A9CE4D76612</source><text/><styles><width>620</width><height>183</height></styles></image><para><coId>6027-1637237138581</coId><text/><inline-styles/><styles/></para><para><coId>6356-1637237221763</coId><text>2.events快</text><inline-styles/><styles/></para><para><coId>6372-1637237176352</coId><text>events 块涉及的指令主要影响 Nginx 服务器与用户的网络连接，常用的设置包括是否开启对多 work process下的网络连接进行序列化，是否允许同时接收多个网络连接，选取哪种事件驱动模型来处理连接请求，每个 wordprocess 可以同时支持的最大连接数等(并发数)。</text><inline-styles><font-size><from>0</from><to>141</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>9097-1637237181511</coId><text>上述例子就表示每个 work process 支持的最大连接数为 1024.这部分的配置对 Nginx 的性能影响较大，在实际中应该灵活配置。</text><inline-styles><font-size><from>0</from><to>71</to><value>16</value></font-size><color><from>7</from><to>37</to><value>#df402a</value></color></inline-styles><styles/></para><image><coId>4662-1637237188475</coId><source>https://note.youdao.com/yws/res/15208/64BFC28C1D134B8284800B86A49D3AB2</source><text/><styles><width>620</width><height>86</height></styles></image><para><coId>4151-1637237181511</coId><text/><inline-styles/><styles/></para><para><coId>3119-1637237146255</coId><text>3.http块</text><inline-styles/><styles/></para><para><coId>6623-1637237194250</coId><text>这算是 Nginx 服务器配置中最频繁的部分，代理、缓存和日志定义等绝大多数功能和第三方模块的配置都在这里。需要注意的是：http 块也可以包括 http 全局块、server 块。</text><inline-styles><font-size><from>0</from><to>91</to><value>16</value></font-size></inline-styles><styles/></para><image><coId>3666-1637237205033</coId><source>https://note.youdao.com/yws/res/15211/8C017B59A3634B29A88C2EC7E6CDB3FF</source><text/><styles><width>561</width><height>551</height></styles></image><para><coId>9775-1637237198256</coId><text/><inline-styles/><styles/></para><para><coId>8350-1637237198442</coId><text>①、http 全局块</text><inline-styles><font-size><from>0</from><to>10</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>1777-1637237365779</coId><text>http 全局块配置的指令包括文件引入、MIME-TYPE 定义、日志自定义、连接超时时间、单链接请求数上限等。</text><inline-styles><font-size><from>0</from><to>56</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>8083-1637237365779</coId><text>②、server 块</text><inline-styles><font-size><from>0</from><to>10</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>5022-1637237371781</coId><text>这块和虚拟主机有密切关系，虚拟主机从用户角度看，和一台独立的硬件主机是完全一样的，该技术的产生是为了节省互联网服务器硬件成本。</text><inline-styles><font-size><from>0</from><to>63</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>5652-1637237371781</coId><text/><inline-styles/><styles/></para><para><coId>8193-1637237371781</coId><text>每个 http 块可以包括多个 server 块，而每个 server 块就相当于一个虚拟主机。而每个 server 块也分为全局 server 块，以及可以同时包含多个 locaton 块。</text><inline-styles><font-size><from>0</from><to>96</to><value>16</value></font-size></inline-styles><styles/></para><list-item level="1" list-id="3957-1637237444932"><coId>1265-1637237365779</coId><text>全局 server 块，最常见的配置是本虚拟机主机的监听配置和本虚拟主机的名称或 IP 配置。</text><inline-styles><font-size><from>0</from><to>47</to><value>16</value></font-size></inline-styles><styles/></list-item><list-item level="1" list-id="3957-1637237444932"><coId>2029-1637237402735</coId><text>location 块，一个 server 块可以配置多个 location 块。这块的主要作用是基于 Nginx 服务器接收到的请求字符串（例如 server_name/uri-string），对虚拟主机名称（也可以是 IP 别名）之外的字符串（例如 前面的 /uri-string）进行匹配，对特定的请求进行处理。地址定向、数据缓存和应答控制等功能，还有许多第三方模块的配置也在这里进行。</text><inline-styles><font-size><from>0</from><to>195</to><value>16</value></font-size></inline-styles><styles/></list-item><para><coId>2676-1637237402735</coId><text/><inline-styles/><styles/></para><para><coId>5597-1637237402735</coId><text> </text><inline-styles><font-size><from>0</from><to>1</to><value>16</value></font-size></inline-styles><styles/></para><para><coId>2033-1637237198576</coId><text/><inline-styles/><styles/></para><para><coId>8080-1637237199427</coId><text/><inline-styles/><styles/></para><para><coId>6745-1637237199543</coId><text/><inline-styles/><styles/></para><para><coId>7226-1637237199650</coId><text/><inline-styles/><styles/></para></body></note>